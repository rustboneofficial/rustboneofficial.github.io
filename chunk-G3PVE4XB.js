import{$ as f,$a as We,Aa as Oe,Ab as mn,Ba as Ve,Bb as vn,C as me,Ca as Dr,Cb as bn,D as _e,Da as Be,Db as Pt,E as we,Ea as d,F as en,Fa as J,Fb as Cn,G as Me,Ga as zr,Gb as Hr,H as Mr,Ha as Nr,Hb as Vr,J as _t,Ja as W,Jb as xn,K as ce,Ka as pn,Kb as Ge,L as tn,La as Lr,Lb as Br,M as Sr,Ma as S,Mb as yn,Nb as Zr,O as Pr,Oa as Ur,Ob as qr,P as Or,Pa as hn,Pb as K,Q as q,Qa as $r,Qb as Wr,R as Rr,Ra as R,Rb as _n,S as N,Sa as gn,Sb as Gr,T as D,Ta as x,Tb as Yr,Ua as G,Ub as Ye,V as _,Va as F,Vb as Kr,W as nn,Wb as Qr,X as Ir,Xa as Ze,Xb as Xr,Y as L,Ya as fn,Yb as Ot,Z as rn,_ as w,_a as qe,a as p,aa as on,ab as u,ac as oe,b as k,ba as Er,bb as h,bc as Jr,ca as Fe,cb as P,cc as ei,db as Y,dc as wn,e as br,ea as X,eb as A,ec as ti,f as Cr,fa as an,fb as b,fc as ni,g as xr,ga as wt,h as Kt,ha as Mt,hc as ri,i as Qt,j as fe,ja as Tr,k as B,ka as Se,kb as y,l as se,la as le,lb as U,m as $,ma as Pe,mb as be,n as v,na as I,nb as jr,o as je,oa as E,p as yr,pa as sn,pc as ii,q as _r,qa as cn,r as O,ra as ln,rc as oi,s as yt,t as j,ta as He,tb as ee,u as Xt,ua as ie,v as wr,va as kr,w as Jt,wa as dn,xa as Ar,ya as ve,yb as St,za as un,zb as Fr}from"./chunk-J433ULLT.js";var Rt=(()=>{class t{constructor(e){this.platformId=e,this.hapticPatterns={heartbeat:{pattern:[50,100,50],description:"Biometric pulse simulation"},impact:{pattern:[150],description:"Heavy mechanical impact"},glitch:{pattern:[20,50,20,100,30],description:"System malfunction feedback"},boot:{pattern:[100,200,100,200,300],description:"System initialization sequence"},login:{pattern:[50,100,50,100],description:"Biometric authentication feedback"},error:{pattern:[200,100,200],description:"System error notification"},success:{pattern:[30,50,30],description:"Operation successful feedback"},notification:{pattern:[80,120],description:"Incoming message alert"}},this.isEnabled=!0,this.isHapticSupported=ei(this.platformId)&&"vibrate"in navigator&&typeof navigator.vibrate=="function",console.log(`[HapticService] Haptic feedback ${this.isHapticSupported?"available":"not supported"}`)}trigger(e){if(!this.isHapticSupported||!this.isEnabled)return console.log(`[HapticService] Haptic ${e} skipped (disabled or unsupported)`),!1;let n=this.hapticPatterns[e];try{let i=navigator.vibrate(n.pattern);return console.log(`[HapticService] Triggered ${e}: ${n.description}`),i}catch(i){return console.warn(`[HapticService] Failed to trigger ${e}:`,i),!1}}triggerCustom(e,n){if(!this.isHapticSupported||!this.isEnabled)return!1;try{let i=navigator.vibrate(e);return n&&console.log(`[HapticService] Custom pattern: ${n}`),i}catch(i){return console.warn("[HapticService] Failed to trigger custom pattern:",i),!1}}stop(){if(!this.isHapticSupported)return!1;try{return navigator.vibrate(0)}catch(e){return console.warn("[HapticService] Failed to stop haptic:",e),!1}}setEnabled(e){this.isEnabled=e,console.log(`[HapticService] Haptic feedback ${e?"enabled":"disabled"}`)}isAvailable(){return this.isHapticSupported&&this.isEnabled}getAvailablePatterns(){return p({},this.hapticPatterns)}testAllPatterns(){if(!this.isAvailable()){console.warn("[HapticService] Cannot test patterns - haptics unavailable");return}let e=Object.keys(this.hapticPatterns),n=0,i=()=>{if(n<e.length){let o=e[n];console.log(`[HapticService] Testing pattern ${n+1}/${e.length}: ${o}`),this.trigger(o),n++,setTimeout(i,1500)}};i()}static{this.\u0275fac=function(n){return new(n||t)(w(ve))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ai={1:"crisol",2:"crisol",3:"crisol",4:"crisol",5:"crisol",6:"vivero",7:"vivero",8:"vivero",9:"vivero",10:"vivero",11:"elite",12:"elite",13:"elite",14:"laboratorio",15:"laboratorio",16:"laboratorio",17:"laboratorio",18:"muerta",19:"muerta",20:"muerta"},go={crisol:"crisol",magma_zone:"crisol",industrial_sector:"crisol",volcanic_region:"crisol",forge_district:"crisol",smelting_facility:"crisol",el_crisol:"crisol",vivero:"vivero",bio_zone:"vivero",toxic_jungle:"vivero",mutation_sector:"vivero",organic_district:"vivero",spore_fields:"vivero",el_vivero:"vivero",elite:"elite",cyber_zone:"elite",cyber_nexus:"elite",tech_district:"elite",hologram_sector:"elite",data_core:"elite",la_elite:"elite",aristocracia:"elite",laboratorio:"laboratorio",research_zone:"laboratorio",research_lab:"laboratorio",medical_bay:"laboratorio",scientific_facility:"laboratorio",testing_chambers:"laboratorio",laboratorios:"laboratorio",muerta:"muerta",void_zone:"muerta",dead_zone:"muerta",wasteland:"muerta",abandoned_sector:"muerta",desolation:"muerta",zona_muerta:"muerta"},si=(()=>{class t{constructor(){this.currentUIMode=S("normal"),this.currentReaderZone=S("neutral"),this.isAccessibilityMode=xn(()=>this.currentUIMode()==="accessibility"),this.currentZoneClass=xn(()=>{let e=this.currentReaderZone();return e==="neutral"?"":`zone-${e}`}),console.log("[ZoneService] Service initialized"),Ge(()=>{console.log(`[ZoneService] UI Mode: ${this.currentUIMode()}`)}),Ge(()=>{console.log(`[ZoneService] Reader Zone: ${this.currentReaderZone()}`)})}setUIMode(e){this.currentUIMode.set(e),console.log(`\u{1F3A8} [ZoneService] UI Mode changed to: ${e}`)}setReaderZone(e){this.currentReaderZone.set(e),console.log(`\u{1F4CD} [ZoneService] Reader Zone changed to: ${e}`)}detectChapterZone(e){if(!e)return"neutral";let n=e.ring||e.aro;if(n!==void 0){let c=typeof n=="string"?parseInt(n,10):n;if(c>=1&&c<=20){let s=ai[c];return console.log(`\u{1F4CD} [ZoneService] Chapter "${e.title}" Aro ${c} \u2192 Zone: ${s}`),s}}let i=e.location;if(!i)return console.log(`\u{1F4CD} [ZoneService] Chapter "${e.title}" has no ring/location metadata, defaulting to neutral`),"neutral";let o=i.toLowerCase().trim(),a=go[o]||"neutral";return console.log(`\u{1F4CD} [ZoneService] Chapter "${e.title}" location: "${i}" \u2192 Zone: ${a}`),a}applyChapterZone(e){let n=this.detectChapterZone(e);this.setReaderZone(n)}reset(){this.setUIMode("normal"),this.setReaderZone("neutral"),console.log("\u{1F504} [ZoneService] Reset to default state")}getAllZones(){return["neutral","crisol","vivero","elite","laboratorio","muerta"]}getZoneDescription(e){return{neutral:"Neutral - Sin zona espec\xEDfica, colores por defecto",crisol:"ZONA 1: El Crisol (Aros 1-5) - Sectores industriales, magma, calor extremo",vivero:"ZONA 2: El Vivero (Aros 6-10) - Selva t\xF3xica, mutaciones bio-org\xE1nicas",elite:"ZONA 3: La \xC9lite (Aros 11-13) - Aristocracia, distritos tecnol\xF3gicos, ne\xF3n cibern\xE9tico",laboratorio:"ZONA 4: Laboratorios (Aros 14-17) - Instalaciones cient\xEDficas, ambientes cl\xEDnicos",muerta:"ZONA 5: Zona Muerta (Aros 18-20) - Desolaci\xF3n absoluta, chatarra, sin vida"}[e]}getZoneRings(e){return{neutral:[],crisol:[1,2,3,4,5],vivero:[6,7,8,9,10],elite:[11,12,13],laboratorio:[14,15,16,17],muerta:[18,19,20]}[e]}getZoneFromRing(e){return e<1||e>20?"neutral":ai[e]}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function mo(t,r){if(t&1&&(u(0,"div",18)(1,"span",19),y(2,"\u{1F513}"),h(),u(3,"span",20),y(4),h()()),t&2){let e=b(2);d(4),be("Descubierto en: ",e.loreEntry==null?null:e.loreEntry.unlockTrigger,"")}}function vo(t,r){if(t&1){let e=Y();u(0,"div",1),A("click",function(){I(e);let i=b();return E(i.closePopup())}),u(1,"div",2),A("click",function(i){I(e);let o=b();return E(o.onContentClick(i))}),u(2,"div",3)(3,"div",4)(4,"span",5),y(5),h(),u(6,"span",6),y(7),h()(),u(8,"button",7),A("click",function(){I(e);let i=b();return E(i.closePopup())}),u(9,"span"),y(10,"\u2715"),h()()(),u(11,"div",8)(12,"span",9),y(13,"\u{1F50D}"),h(),u(14,"span",10),y(15),h()(),u(16,"h2",11),y(17),h(),P(18,"div",12),u(19,"div",13)(20,"p"),y(21),h()(),R(22,mo,5,1,"div",14),u(23,"div",15),P(24,"div",16),u(25,"span",17),y(26,"RUSTBONE ARCHIVES \u2022 CLASSIFIED"),h()()()()}if(t&2){let e=b();F("visible",e.showContent())("closing",e.isClosing()),d(),F("visible",e.showContent())("closing",e.isClosing())("category",e.getCategoryClass()),d(4),U(e.getCategoryIcon()),d(2),U(e.loreEntry==null||e.loreEntry.category==null?null:e.loreEntry.category.toUpperCase()),d(8),U(e.loreEntry==null?null:e.loreEntry.keyword),d(2),U(e.loreEntry==null?null:e.loreEntry.title),d(4),U(e.loreEntry==null?null:e.loreEntry.content),d(),x("ngIf",e.loreEntry==null?null:e.loreEntry.unlockTrigger)}}var ci=(()=>{class t{constructor(){this.loreEntry=null,this.isVisible=!1,this.close=new ie,this.hapticService=f(Rt),this.showContent=S(!1),this.isClosing=S(!1)}ngOnInit(){console.log("\u{1F3A8} [LorePopup] ngOnInit - isVisible:",this.isVisible,"loreEntry:",this.loreEntry)}ngOnChanges(e){console.log("\u{1F3A8} [LorePopup] ngOnChanges:",e),e.isVisible&&e.isVisible.currentValue===!0&&(console.log("\u{1F3A8} [LorePopup] Visibility changed to TRUE, triggering animation..."),this.isClosing.set(!1),setTimeout(()=>{this.showContent.set(!0),this.hapticService.trigger("notification"),console.log("\u{1F3A8} [LorePopup] Animation triggered, showContent:",this.showContent())},50)),e.isVisible&&e.isVisible.currentValue===!1&&(console.log("\u{1F3A8} [LorePopup] Visibility changed to FALSE"),this.showContent.set(!1),this.isClosing.set(!1))}closePopup(){this.isClosing.set(!0),this.hapticService.trigger("notification"),setTimeout(()=>{this.isClosing.set(!1),this.showContent.set(!1),this.close.emit()},300)}onContentClick(e){e.stopPropagation()}getCategoryIcon(){return this.loreEntry&&{technology:"\u2699\uFE0F",faction:"\u{1F3DB}\uFE0F",location:"\u{1F5FA}\uFE0F",character:"\u{1F464}",weapon:"\u2694\uFE0F",other:"\u{1F4D6}"}[this.loreEntry.category]||"\u{1F4D6}"}getCategoryClass(){return this.loreEntry?this.loreEntry.category:"other"}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=X({type:t,selectors:[["app-lore-popup"]],inputs:{loreEntry:"loreEntry",isVisible:"isVisible"},outputs:{close:"close"},standalone:!0,features:[Pe,ee],decls:1,vars:1,consts:[["class","lore-overlay",3,"visible","closing","click",4,"ngIf"],[1,"lore-overlay",3,"click"],[1,"lore-popup",3,"click"],[1,"lore-header"],[1,"category-badge"],[1,"icon"],[1,"label"],[1,"close-btn",3,"click"],[1,"keyword-tag"],[1,"tag-icon"],[1,"keyword"],[1,"lore-title"],[1,"divider"],[1,"lore-content"],["class","unlock-info",4,"ngIf"],[1,"lore-footer"],[1,"scanlines"],[1,"footer-text"],[1,"unlock-info"],[1,"unlock-icon"],[1,"unlock-text"]],template:function(n,i){n&1&&R(0,vo,27,16,"div",0),n&2&&x("ngIf",i.isVisible)},dependencies:[oe,Ot],styles:['.lore-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000d9;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:9999;display:flex;justify-content:center;align-items:center;padding:20px;opacity:0;transition:opacity .3s ease}.lore-overlay.visible[_ngcontent-%COMP%]{opacity:1}.lore-overlay.closing[_ngcontent-%COMP%]{opacity:0}.lore-popup[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ui-surface) 0%,var(--dark-metal) 100%);border:3px solid var(--rust-orange);border-radius:8px;box-shadow:0 0 20px #ff77004d,0 0 40px #ff77001a,inset 0 0 60px #00000080;max-width:600px;width:100%;max-height:80vh;overflow-y:auto;position:relative;opacity:0;transform:scale(.9) translateY(20px);transition:all .3s cubic-bezier(.34,1.56,.64,1)}.lore-popup.visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1) translateY(0)}.lore-popup.closing[_ngcontent-%COMP%]{opacity:0;transform:scale(.95) translateY(-10px);transition:all .2s ease}.lore-popup[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 0%,var(--rust-orange) 50%,transparent 100%);animation:_ngcontent-%COMP%_scan 3s linear infinite;opacity:.5}@keyframes _ngcontent-%COMP%_scan{0%{transform:translateY(0)}to{transform:translateY(80vh)}}.lore-popup.category.technology[_ngcontent-%COMP%]{border-color:var(--terminal-green);box-shadow:0 0 20px #0f03,inset 0 0 60px #00000080}.lore-popup.category.faction[_ngcontent-%COMP%]{border-color:var(--magma-red);box-shadow:0 0 20px #f003,inset 0 0 60px #00000080}.lore-popup.category.location[_ngcontent-%COMP%]{border-color:var(--industrial-blue);box-shadow:0 0 20px #0096ff33,inset 0 0 60px #00000080}.lore-popup.category.character[_ngcontent-%COMP%]{border-color:var(--rust-yellow);box-shadow:0 0 20px #ffc80033,inset 0 0 60px #00000080}.lore-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:2px solid var(--ui-border);background:#0000004d}.category-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 12px;background:#ff77001a;border:1px solid var(--rust-orange);border-radius:4px;font-family:Courier New,Monaco,monospace;font-size:11px;font-weight:700;letter-spacing:1px}.category-badge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:14px}.category-badge[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--rust-orange)}.close-btn[_ngcontent-%COMP%]{background:transparent;border:2px solid var(--ui-border);color:var(--ui-text);width:32px;height:32px;border-radius:4px;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:all .2s ease;font-size:18px}.close-btn[_ngcontent-%COMP%]:hover{background:var(--rust-orange);border-color:var(--rust-orange);color:var(--dark-metal);transform:rotate(90deg)}.close-btn[_ngcontent-%COMP%]:active{transform:rotate(90deg) scale(.95)}.keyword-tag[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#ff77000d;border-bottom:1px solid var(--ui-border)}.keyword-tag[_ngcontent-%COMP%]   .tag-icon[_ngcontent-%COMP%]{font-size:16px}.keyword-tag[_ngcontent-%COMP%]   .keyword[_ngcontent-%COMP%]{font-family:Courier New,Monaco,monospace;font-size:14px;font-weight:700;color:var(--rust-orange);text-transform:uppercase;letter-spacing:2px}.lore-title[_ngcontent-%COMP%]{padding:20px 20px 16px;margin:0;font-family:Arial,sans-serif;font-size:24px;font-weight:700;color:var(--ui-text);text-shadow:0 0 10px rgba(255,119,0,.3);line-height:1.3}.divider[_ngcontent-%COMP%]{height:2px;margin:0 20px 20px;background:linear-gradient(90deg,transparent 0%,var(--rust-orange) 20%,var(--rust-orange) 80%,transparent 100%);box-shadow:0 0 8px #ff770080}.lore-content[_ngcontent-%COMP%]{padding:0 20px 20px;font-family:Georgia,Times New Roman,serif;font-size:16px;line-height:1.8;color:var(--ui-text-secondary)}.lore-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px}.lore-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.unlock-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#00ff000d;border-top:1px solid rgba(0,255,0,.2);font-family:Courier New,Monaco,monospace;font-size:12px;color:var(--terminal-green)}.unlock-info[_ngcontent-%COMP%]   .unlock-icon[_ngcontent-%COMP%]{font-size:14px}.unlock-info[_ngcontent-%COMP%]   .unlock-text[_ngcontent-%COMP%]{font-style:italic}.lore-footer[_ngcontent-%COMP%]{position:relative;padding:12px 20px;background:#00000080;border-top:2px solid var(--ui-border);text-align:center;overflow:hidden}.lore-footer[_ngcontent-%COMP%]   .scanlines[_ngcontent-%COMP%]{position:absolute;inset:0;background:repeating-linear-gradient(0deg,rgba(255,119,0,.03) 0px,rgba(255,119,0,.03) 1px,transparent 1px,transparent 2px);pointer-events:none}.lore-footer[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{position:relative;z-index:1;font-family:Courier New,Monaco,monospace;font-size:10px;font-weight:700;letter-spacing:2px;color:var(--ui-text-secondary);opacity:.6}@media (max-width: 768px){.lore-popup[_ngcontent-%COMP%]{max-width:95%;max-height:90vh}.lore-title[_ngcontent-%COMP%]{font-size:20px}.lore-content[_ngcontent-%COMP%]{font-size:14px}}.lore-popup[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.lore-popup[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000004d}.lore-popup[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--rust-orange);border-radius:4px}.lore-popup[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--magma-red)}']})}}return t})();function bo(t,r){if(t&1&&(u(0,"div",12),P(1,"div",13),h()),t&2){let e=r.$implicit,n=r.$index,i=b();G("height",10+n*8,"%"),F("active",e<=i.currentRadiation())("critical",e>80&&e<=i.currentRadiation())}}function Co(t,r){if(t&1&&P(0,"div",15),t&2){let e=r.$implicit;G("left",e.x,"%")("animation-delay",e.delay,"s")("animation-duration",e.duration,"s")}}function xo(t,r){if(t&1&&(u(0,"div",11),qe(1,Co,1,6,"div",14,fn),h()),t&2){let e=b();d(),We(e.particleArray)}}var li=(()=>{class t{constructor(){this.progress=0,this.isActive=!0,this.showParticles=!0,this.currentRadiation=S(0),this.bars=Array.from({length:10},(e,n)=>(n+1)*10),this.particleArray=[]}ngOnInit(){this.particleArray=Array.from({length:8},()=>({x:Math.random()*100,delay:Math.random()*3,duration:2+Math.random()*2})),this.animateRadiation()}ngOnDestroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}animateRadiation(){let e=this.progress,n=this.currentRadiation(),i=e-n,o=i*.1;Math.abs(i)>.1?(this.currentRadiation.set(n+o),this.animationFrame=requestAnimationFrame(()=>this.animateRadiation())):this.currentRadiation.set(e)}ngOnChanges(){this.animateRadiation()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=X({type:t,selectors:[["app-geiger-detector"]],inputs:{progress:"progress",isActive:"isActive",showParticles:"showParticles"},standalone:!0,features:[Pe,ee],decls:17,vars:7,consts:[[1,"geiger-detector"],[1,"radiation-display"],[1,"display-label"],[1,"display-value"],[1,"value-number"],[1,"value-unit"],[1,"radiation-bars"],[1,"bar",3,"active","critical","height"],[1,"status-indicator"],[1,"status-dot"],[1,"status-text"],[1,"particles"],[1,"bar"],[1,"bar-fill"],[1,"particle",3,"left","animation-delay","animation-duration"],[1,"particle"]],template:function(n,i){n&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"RADIATION LEVEL"),h(),u(4,"div",3)(5,"span",4),y(6),h(),u(7,"span",5),y(8,"mSv"),h()()(),u(9,"div",6),qe(10,bo,2,6,"div",7,fn),h(),u(12,"div",8),P(13,"div",9),u(14,"span",10),y(15),h()(),R(16,xo,3,0,"div",11),h()),n&2&&(F("active",i.isActive),d(6),U(i.currentRadiation().toFixed(1)),d(4),We(i.bars),d(2),F("critical",i.currentRadiation()>80),d(3),be(" ",i.currentRadiation()<30?"SAFE":i.currentRadiation()<70?"ELEVATED":"CRITICAL"," "),d(),Ze(16,i.showParticles&&i.currentRadiation()>50?16:-1))},dependencies:[oe],styles:[".geiger-detector[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:120px;background:linear-gradient(135deg,#000000f2,#141414fa);border:2px solid var(--terminal-green);border-radius:4px;padding:12px;box-shadow:0 0 20px rgba(var(--terminal-green),.3),inset 0 0 15px #000000e6;font-family:Share Tech Mono,Courier New,monospace;z-index:9998;transition:all .3s ease}.geiger-detector.active[_ngcontent-%COMP%]{box-shadow:0 0 30px rgba(var(--terminal-green),.5),inset 0 0 20px #000000e6}.radiation-display[_ngcontent-%COMP%]{margin-bottom:12px;text-align:center}.display-label[_ngcontent-%COMP%]{font-size:8px;color:var(--terminal-green);opacity:.7;letter-spacing:1px;margin-bottom:4px}.display-value[_ngcontent-%COMP%]{font-size:24px;color:var(--terminal-green);text-shadow:0 0 10px rgba(var(--terminal-green),.8);font-weight:700;line-height:1}.value-number[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.value-unit[_ngcontent-%COMP%]{font-size:12px;opacity:.8;margin-left:2px}.radiation-bars[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;height:60px;gap:3px;margin-bottom:12px;padding:0 4px}.bar[_ngcontent-%COMP%]{flex:1;background:rgba(var(--terminal-green),.1);border:1px solid rgba(var(--terminal-green),.3);border-radius:2px;position:relative;overflow:hidden;transition:all .3s ease}.bar.active[_ngcontent-%COMP%]{background:rgba(var(--terminal-green),.2);border-color:var(--terminal-green);box-shadow:0 0 5px rgba(var(--terminal-green),.5)}.bar.active[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(to top,var(--terminal-green) 0%,rgba(var(--terminal-green),.6) 100%);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.bar.critical[_ngcontent-%COMP%]{border-color:var(--rust-orange);box-shadow:0 0 8px rgba(var(--rust-orange),.6)}.bar.critical[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{background:linear-gradient(to top,var(--rust-orange) 0%,rgba(var(--rust-orange),.6) 100%)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:9px;color:var(--terminal-green);text-shadow:0 0 5px rgba(var(--terminal-green),.5)}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--terminal-green);box-shadow:0 0 8px rgba(var(--terminal-green),.8);animation:_ngcontent-%COMP%_blink 2s ease-in-out infinite}.status-indicator.critical[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--rust-orange);box-shadow:0 0 10px rgba(var(--rust-orange),1);animation:_ngcontent-%COMP%_blink .5s ease-in-out infinite}.status-indicator.critical[_ngcontent-%COMP%]{color:var(--rust-orange);text-shadow:0 0 5px rgba(var(--rust-orange),.5)}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.3}}.status-text[_ngcontent-%COMP%]{letter-spacing:1px;font-weight:700}.particles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}.particle[_ngcontent-%COMP%]{position:absolute;bottom:0;width:2px;height:2px;background:var(--terminal-green);border-radius:50%;opacity:0;animation:_ngcontent-%COMP%_particle-rise 3s linear infinite}@keyframes _ngcontent-%COMP%_particle-rise{0%{transform:translateY(0);opacity:0}10%{opacity:1}90%{opacity:.5}to{transform:translateY(-100px);opacity:0}}@media (max-width: 768px){.geiger-detector[_ngcontent-%COMP%]{bottom:70px;right:10px;width:100px;padding:10px}.display-value[_ngcontent-%COMP%]{font-size:20px}.radiation-bars[_ngcontent-%COMP%]{height:50px}}"]})}}return t})();var di=(()=>{class t{constructor(){this.STORAGE_KEY="rustbone_scrap_inventory",this.REWARDS_KEY="rustbone_scrap_rewards",this.inventory=S([]),this.unlockedRewards=S([]),this.totalCollected=S(0),this.totalAvailable=S(0),this.availableScraps=[{id:"bolt-01",name:"Rusty Bolt",type:"common",icon:"/assets/images/scrap/bolt.svg",description:"A corroded hexagonal bolt from the old machinery",chapter:"chapter-01",position:{x:85,y:15},collected:!1},{id:"chip-01",name:"Damaged Microchip",type:"rare",icon:"/assets/images/scrap/chip.svg",description:"A partially functional circuit with mysterious data",chapter:"chapter-01",position:{x:92,y:45},collected:!1},{id:"wire-01",name:"Copper Wire Coil",type:"common",icon:"/assets/images/scrap/wire.svg",description:"Tangled copper wiring still showing faint electrical charge",chapter:"chapter-01",position:{x:88,y:72},collected:!1},{id:"gear-01",name:"Industrial Gear",type:"rare",icon:"/assets/images/scrap/gear.svg",description:"A heavy gear wheel from Zone 2's processing machinery",chapter:"chapter-01",position:{x:90,y:28},collected:!1},{id:"battery-01",name:"Depleted Battery",type:"common",icon:"/assets/images/scrap/battery.svg",description:"An old 9V battery with corrosion on the terminals",chapter:"chapter-01",position:{x:87,y:58},collected:!1},{id:"capacitor-01",name:"Bulging Capacitor",type:"epic",icon:"/assets/images/scrap/capacitor.svg",description:"An electrolytic capacitor showing signs of failure",chapter:"chapter-01",position:{x:93,y:88},collected:!1},{id:"fuse-01",name:"Blown Fuse",type:"common",icon:"/assets/images/scrap/fuse.svg",description:"A glass fuse with a visible break in the wire",chapter:"chapter-01",position:{x:86,y:35},collected:!1},{id:"spring-01",name:"Coiled Spring",type:"rare",icon:"/assets/images/scrap/spring.svg",description:"A bent but still functional metal spring",chapter:"chapter-01",position:{x:91,y:65},collected:!1}],this.rewards=[{id:"reward-magma",name:"Magma Concept Art",description:"Early design sketches of the protagonist Magma",requiredScraps:["bolt-01","wire-01","battery-01"],unlocked:!1,imageUrl:"/assets/images/rewards/concept-art-magma.jpg"},{id:"reward-zian",name:"Zian Concept Art",description:"Character design exploration for Zian",requiredScraps:["chip-01","gear-01","fuse-01"],unlocked:!1,imageUrl:"/assets/images/rewards/concept-art-zian.jpg"},{id:"reward-zone2",name:"Zone 2 Environment",description:"Detailed environment art of the Zone 2 facility",requiredScraps:["capacitor-01","spring-01"],unlocked:!1,imageUrl:"/assets/images/rewards/concept-art-zone2.jpg"}],this.loadInventory(),this.loadRewards(),this.updateStatistics()}getScrapsForChapter(e){return this.availableScraps.filter(n=>n.chapter===e)}collectScrap(e){let n=this.availableScraps.find(o=>o.id===e);if(!n||n.collected)return!1;n.collected=!0,n.collectedAt=Date.now();let i=this.inventory();return this.inventory.set([...i,n]),this.saveInventory(),this.checkRewards(),this.updateStatistics(),console.log(`\u{1F529} Scrap collected: ${n.name}`),!0}checkRewards(){let e=this.inventory().map(i=>i.id),n=[];this.rewards.forEach(i=>{!i.unlocked&&this.canUnlockReward(i,e)&&(i.unlocked=!0,n.push(i),console.log(`\u{1F3A8} Reward unlocked: ${i.name}`))}),n.length>0&&(this.unlockedRewards.set([...this.unlockedRewards(),...n]),this.saveRewards())}canUnlockReward(e,n){return e.requiredScraps.every(i=>n.includes(i))}updateStatistics(){this.totalCollected.set(this.inventory().length),this.totalAvailable.set(this.availableScraps.length)}saveInventory(){let e=this.inventory().map(n=>({id:n.id,collectedAt:n.collectedAt}));localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadInventory(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(e){let n=JSON.parse(e),i=[];n.forEach(o=>{let a=this.availableScraps.find(c=>c.id===o.id);a&&(a.collected=!0,a.collectedAt=o.collectedAt,i.push(a))}),this.inventory.set(i)}}catch(e){console.error("Error loading scrap inventory:",e)}}saveRewards(){let e=this.unlockedRewards().map(n=>n.id);localStorage.setItem(this.REWARDS_KEY,JSON.stringify(e))}loadRewards(){try{let e=localStorage.getItem(this.REWARDS_KEY);if(e){let n=JSON.parse(e),i=[];n.forEach(o=>{let a=this.rewards.find(c=>c.id===o);a&&(a.unlocked=!0,i.push(a))}),this.unlockedRewards.set(i)}}catch(e){console.error("Error loading scrap rewards:",e)}}getAllRewards(){return this.rewards}getStatistics(){return{collected:this.totalCollected(),total:this.totalAvailable(),percentage:Math.round(this.totalCollected()/this.totalAvailable()*100),rewardsUnlocked:this.unlockedRewards().length,rewardsTotal:this.rewards.length}}resetProgress(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.REWARDS_KEY),this.availableScraps.forEach(e=>{e.collected=!1,delete e.collectedAt}),this.rewards.forEach(e=>e.unlocked=!1),this.inventory.set([]),this.unlockedRewards.set([]),this.updateStatistics(),console.log("\u{1F504} Scrap hunting progress reset")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mn={hasCompletedOnboarding:!1,acceptedImmersiveExperience:!1,acceptedPhotosensitivityRisk:!1,acceptedRemoteEvents:!1,accessibilityMode:!1,reducedMotion:!1,highContrast:!1,textSize:"normal",soundEnabled:!0,hapticFeedbackEnabled:!0,criticalEventsEnabled:!0,lastUpdated:Date.now()},Sn="rustbone_user_preferences",ui=(()=>{class t{constructor(){this.preferences=S(this.loadPreferences()),this.currentTheme=S("normal"),this.applyPreferences(),this.detectSystemPreferences()}initZoneService(e){this.zoneService=e}loadPreferences(){try{let e=localStorage.getItem(Sn);if(e){let n=JSON.parse(e);return p(p({},Mn),n)}}catch(e){console.error("\u274C Error loading preferences:",e)}return p({},Mn)}savePreferences(e){try{e.lastUpdated=Date.now(),localStorage.setItem(Sn,JSON.stringify(e)),this.preferences.set(e)}catch(n){console.error("\u274C Error saving preferences:",n)}}completeOnboarding(e){let n=this.preferences();this.savePreferences(k(p({},n),{hasCompletedOnboarding:!0,acceptedImmersiveExperience:e.immersiveExperience,acceptedPhotosensitivityRisk:e.photosensitivityRisk,acceptedRemoteEvents:e.remoteEvents,onboardingCompletedAt:Date.now()})),console.log("\u2705 Onboarding completed with consents:",e)}enableAccessibilityMode(e){let n=this.preferences();this.savePreferences(k(p({},n),{accessibilityMode:e,reducedMotion:e,highContrast:e})),this.applyTheme(e?"accessibility":"normal")}updatePreference(e,n){let i=this.preferences();this.savePreferences(k(p({},i),{[e]:n})),this.applyPreferences()}applyTheme(e){document.body.classList.remove("theme-accessibility","theme-critical","theme-lockdown"),e!=="normal"&&document.body.classList.add(`theme-${e}`),this.currentTheme.set(e),console.log(`\u{1F3A8} Theme applied: ${e}`),this.zoneService&&(e==="accessibility"?this.zoneService.setUIMode("accessibility"):this.zoneService.setUIMode("normal"))}toggleAccessibilityMode(){let n=!this.preferences().accessibilityMode;this.updatePreference("accessibilityMode",n),n?this.applyTheme("accessibility"):this.applyTheme("normal"),console.log(`\u267F Accessibility mode: ${n?"ENABLED":"DISABLED"}`)}applyPreferences(){let e=this.preferences();e.accessibilityMode&&this.applyTheme("accessibility"),e.reducedMotion?(document.documentElement.style.setProperty("--theme-transition","0s"),document.documentElement.style.setProperty("--glitch-duration","0s")):(document.documentElement.style.setProperty("--theme-transition","0.8s"),document.documentElement.style.setProperty("--glitch-duration","0.3s"));let n={normal:"100%",large:"115%",xlarge:"130%"};document.documentElement.style.fontSize=n[e.textSize]}needsOnboarding(){return!this.preferences().hasCompletedOnboarding}canApplyCriticalTheme(){let e=this.preferences();return e.acceptedImmersiveExperience&&e.acceptedPhotosensitivityRisk&&e.acceptedRemoteEvents&&e.criticalEventsEnabled&&!e.accessibilityMode}resetToDefaults(){localStorage.removeItem(Sn),this.preferences.set(p({},Mn)),this.applyTheme("normal")}detectSystemPreferences(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this.preferences().reducedMotion||(console.log("\u{1F50D} Detected system preference: prefers-reduced-motion"),this.updatePreference("reducedMotion",!0))),window.matchMedia("(prefers-contrast: high)").matches&&(this.preferences().highContrast||(console.log("\u{1F50D} Detected system preference: prefers-contrast: high"),this.updatePreference("highContrast",!0)))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var pi=(()=>{class t{constructor(e){this.userPreferences=e,this.notifications=S([]),this.soundEnabled=S(!0)}notify(e,n,i,o=5e3){let a={id:`notif-${Date.now()}-${Math.random()}`,type:e,icon:i||this.getDefaultIcon(e),message:n,timestamp:Date.now(),duration:o};this.notifications.update(c=>[...c,a]),this.playBeep(),o>0&&setTimeout(()=>this.dismiss(a.id),o)}alert(e,n){this.notify("alert",e,"\u26A0\uFE0F",n)}warning(e,n){this.notify("warning",e,"\u26A1",n)}info(e,n){this.notify("info",e,"\u2139\uFE0F",n)}message(e,n){this.notify("message",e,"\u{1F4E9}",n)}dismiss(e){this.notifications.update(n=>n.filter(i=>i.id!==e))}clearAll(){this.notifications.set([])}getDefaultIcon(e){switch(e){case"alert":return"\u26A0\uFE0F";case"warning":return"\u26A1";case"info":return"\u2139\uFE0F";case"message":return"\u{1F4E9}"}}playBeep(){if(this.soundEnabled())try{this.beepAudio||(this.beepAudio=new Audio("/assets/audio/sfx/notification-beep.mp3"),this.beepAudio.volume=.3),this.beepAudio.currentTime=0,this.beepAudio.play().catch(e=>{console.warn("Could not play notification beep:",e)})}catch(e){console.warn("Audio not available:",e)}}toggleSound(){this.soundEnabled.update(e=>!e),localStorage.setItem("rustbone_notif_sound",String(this.soundEnabled()))}loadPreferences(){let e=localStorage.getItem("rustbone_notif_sound");e!==null&&this.soundEnabled.set(e==="true")}startAmbientNotifications(){let e=()=>{let n=12e4+Math.random()*18e4;setTimeout(()=>{let i=[{type:"warning",msg:"Temperatura del n\xFAcleo subiendo",icon:"\u{1F321}\uFE0F"},{type:"info",msg:"Sistema de vigilancia activo",icon:"\u{1F441}\uFE0F"},{type:"alert",msg:"Presi\xF3n de zona 2 cr\xEDtica",icon:"\u26A0\uFE0F"},{type:"message",msg:"Mensaje entrante encriptado",icon:"\u{1F4E9}"},{type:"info",msg:"Turno de mantenimiento en 30 min",icon:"\u{1F527}"},{type:"warning",msg:"Detector Geiger: Anomal\xEDa detectada",icon:"\u2622\uFE0F"}],o=i[Math.floor(Math.random()*i.length)];this.notify(o.type,o.msg,o.icon,8e3),e()},n)};e()}applyCriticalTheme(e){if(!this.userPreferences.canApplyCriticalTheme()){console.log("\u26A0\uFE0F Critical theme blocked - user preferences disabled"),this.notify("info","Evento cr\xEDtico bloqueado por configuraci\xF3n de usuario","\u2139\uFE0F",5e3);return}console.log("\u{1F6A8} CRITICAL THEME ACTIVATED:",e),this.userPreferences.applyTheme(e.theme),this.notify("alert",`\u{1F6A8} PROTOCOLO CR\xCDTICO: ${e.message}`,"\u26A0\uFE0F",e.duration||0),this.playAlertSound(e.theme),"vibrate"in navigator&&this.userPreferences.preferences().hapticFeedbackEnabled&&navigator.vibrate([200,100,200,100,200]),e.duration&&(this.criticalTimeout&&clearTimeout(this.criticalTimeout),this.criticalTimeout=setTimeout(()=>{this.userPreferences.applyTheme("normal"),this.notify("info","\u2705 Protocolo cr\xEDtico desactivado","\u2139\uFE0F",3e3),console.log("\u2705 Critical theme reverted to normal")},e.duration))}revertCriticalTheme(){this.criticalTimeout&&clearTimeout(this.criticalTimeout),this.userPreferences.applyTheme("normal"),this.notify("info","\u2705 Protocolo cr\xEDtico desactivado manualmente","\u2139\uFE0F",3e3)}playAlertSound(e){if(this.soundEnabled())try{let n={critical:"/assets/audio/sfx/alert-critical.mp3",lockdown:"/assets/audio/sfx/alert-lockdown.mp3",normal:"/assets/audio/sfx/notification-beep.mp3",accessibility:"/assets/audio/sfx/notification-beep.mp3"},i=new Audio(n[e]);i.volume=.5,i.play().catch(o=>{console.warn("Could not play alert sound:",o),this.playBeep()})}catch(n){console.warn("Audio not available:",n)}}testCriticalTheme(e,n=1e4){let i={type:"theme-change",theme:e,reason:"TEST",duration:n,message:e==="critical"?"Fuga de radiaci\xF3n detectada en Sector 7":"Inspecci\xF3n corporativa en progreso",timestamp:Date.now()};this.applyCriticalTheme(i)}static{this.\u0275fac=function(n){return new(n||t)(w(ui))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mo=(t,r)=>r.id;function So(t,r){t&1&&(P(0,"div",6),u(1,"div",7),P(2,"div",8)(3,"div",8)(4,"div",8),h())}function Po(t,r){if(t&1){let e=Y();u(0,"div",3),A("click",function(){let i=I(e).$implicit,o=b();return E(o.collectScrap(i))}),P(1,"img",4),R(2,So,5,0),P(3,"div",5),h()}if(t&2){let e=r.$implicit;G("left",e.position.x,"%")("top",e.position.y,"%"),F("collected",e.collected)("pulsing",!e.collected)("rarity-common",e.type==="common")("rarity-rare",e.type==="rare")("rarity-epic",e.type==="epic")("rarity-legendary",e.type==="legendary"),gn("title",e.collected?"Already collected":e.name),d(),x("src",e.icon,Ve)("alt",e.name),d(),Ze(2,e.collected?-1:2)}}function Oo(t,r){if(t&1&&(u(0,"div",2)(1,"div",9),P(2,"div",10),h(),u(3,"div",11)(4,"span",12),y(5),h(),u(6,"span",13),y(7,"/"),h(),u(8,"span",14),y(9),h(),u(10,"span",15),y(11,"SCRAPS"),h()()()),t&2){let e=b();d(2),G("width",e.collectionPercentage(),"%"),d(3),U(e.statistics().collected),d(4),U(e.statistics().total)}}var hi=(()=>{class t{constructor(e,n){this.scrapService=e,this.notifications=n,this.chapterId="",this.showProgress=S(!0),this.visibleScraps=S([]),this.statistics=S({collected:0,total:0,percentage:0,rewardsUnlocked:0,rewardsTotal:0}),this.collectionPercentage=S(0),this.collectingAnimation=new Set,Ge(()=>{this.updateStatistics()})}ngOnInit(){this.loadScrapsForChapter(),this.updateStatistics()}ngOnDestroy(){}loadScrapsForChapter(){if(!this.chapterId){console.warn("\u26A0\uFE0F No chapter ID provided to ScrapCollectorComponent");return}let e=this.scrapService.getScrapsForChapter(this.chapterId);this.visibleScraps.set(e),console.log(`\u{1F50D} Loaded ${e.length} scraps for chapter ${this.chapterId}`)}collectScrap(e){if(e.collected||this.collectingAnimation.has(e.id))return;this.collectingAnimation.add(e.id);let n=document.querySelector(`[title="${e.name}"]`);n&&n.classList.add("collecting"),setTimeout(()=>{if(this.scrapService.collectScrap(e.id)){this.notifications.notify("info",`Collected: ${e.name}`,"\u{1F529}",5e3);let o=this.scrapService.getStatistics(),c=this.scrapService.getAllRewards().filter(s=>s.unlocked&&!this.statistics().rewardsUnlocked);c.length>0&&c.forEach(s=>{this.notifications.notify("message",`Unlocked: ${s.name}`,"\u{1F3C6}",8e3)}),this.updateStatistics(),this.loadScrapsForChapter()}this.collectingAnimation.delete(e.id)},400)}updateStatistics(){let e=this.scrapService.getStatistics();this.statistics.set(e),this.collectionPercentage.set(e.percentage)}static{this.\u0275fac=function(n){return new(n||t)(J(di),J(pi))}}static{this.\u0275cmp=X({type:t,selectors:[["app-scrap-collector"]],inputs:{chapterId:"chapterId",showProgress:"showProgress"},standalone:!0,features:[ee],decls:4,vars:1,consts:[[1,"scrap-collector"],[1,"scrap-item",3,"collected","pulsing","rarity-common","rarity-rare","rarity-epic","rarity-legendary","left","top"],[1,"collection-progress"],[1,"scrap-item",3,"click"],[1,"scrap-icon",3,"src","alt"],[1,"rarity-border"],[1,"scrap-glow"],[1,"scrap-particles"],[1,"particle"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"collected"],[1,"separator"],[1,"total"],[1,"label"]],template:function(n,i){n&1&&(u(0,"div",0),qe(1,Po,4,20,"div",1,Mo),R(3,Oo,12,4,"div",2),h()),n&2&&(d(),We(i.visibleScraps()),d(2),Ze(3,i.showProgress()?3:-1))},dependencies:[oe],styles:['@charset "UTF-8";.scrap-collector[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:500}.scrap-item[_ngcontent-%COMP%]{position:absolute;width:32px;height:32px;cursor:pointer;pointer-events:auto;transition:all .3s cubic-bezier(.4,0,.2,1);transform:translate(-50%,-50%);-webkit-user-select:none;user-select:none}.scrap-item[_ngcontent-%COMP%]:hover:not(.collected){transform:translate(-50%,-50%) scale(1.2);filter:brightness(1.2)}.scrap-item.collected[_ngcontent-%COMP%]{opacity:.3;cursor:default;filter:grayscale(1)}.scrap-item.collected[_ngcontent-%COMP%]:hover{transform:translate(-50%,-50%) scale(1)}.scrap-item.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.05)}}.scrap-icon[_ngcontent-%COMP%]{width:100%;height:100%;display:block;filter:drop-shadow(0 0 4px rgba(0,0,0,.8))}.scrap-glow[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:40px;height:40px;transform:translate(-50%,-50%);border-radius:50%;opacity:.6;animation:_ngcontent-%COMP%_glow 2s ease-in-out infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_glow{0%,to{opacity:.3;transform:translate(-50%,-50%) scale(1)}50%{opacity:.8;transform:translate(-50%,-50%) scale(1.2)}}.rarity-common[_ngcontent-%COMP%]   .scrap-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(139,139,139,.6) 0%,transparent 70%)}.rarity-rare[_ngcontent-%COMP%]   .scrap-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(0,112,255,.6) 0%,transparent 70%)}.rarity-epic[_ngcontent-%COMP%]   .scrap-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(163,53,238,.6) 0%,transparent 70%)}.rarity-legendary[_ngcontent-%COMP%]   .scrap-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(255,128,0,.6) 0%,transparent 70%)}.rarity-border[_ngcontent-%COMP%]{position:absolute;inset:-2px;border-radius:4px;border:1px solid transparent;pointer-events:none}.scrap-item[_ngcontent-%COMP%]:not(.collected)   .rarity-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_borderPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_borderPulse{0%,to{opacity:.4}50%{opacity:1}}.rarity-common[_ngcontent-%COMP%]   .rarity-border[_ngcontent-%COMP%]{border-color:#8b8b8b}.rarity-rare[_ngcontent-%COMP%]   .rarity-border[_ngcontent-%COMP%]{border-color:#0070ff}.rarity-epic[_ngcontent-%COMP%]   .rarity-border[_ngcontent-%COMP%]{border-color:#a335ee}.rarity-legendary[_ngcontent-%COMP%]   .rarity-border[_ngcontent-%COMP%]{border-color:#ff8000}.scrap-particles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.particle[_ngcontent-%COMP%]{position:absolute;width:2px;height:2px;background:#fffc;border-radius:50%;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.particle[_ngcontent-%COMP%]:nth-child(1){top:20%;left:20%;animation-delay:0s}.particle[_ngcontent-%COMP%]:nth-child(2){top:40%;right:20%;animation-delay:1s}.particle[_ngcontent-%COMP%]:nth-child(3){bottom:20%;left:50%;animation-delay:2s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) scale(1);opacity:.8}50%{transform:translateY(-10px) scale(1.2);opacity:1}}.collection-progress[_ngcontent-%COMP%]{position:fixed;top:65px;left:20px;background:#141419f2;border:1px solid #00ff41;border-radius:4px;padding:8px 12px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);font-family:Courier New,monospace;pointer-events:auto;box-shadow:0 0 20px #00ff414d;z-index:45}.progress-bar[_ngcontent-%COMP%]{width:120px;height:4px;background:#00ff4133;border-radius:3px;overflow:hidden;margin-bottom:6px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#00ff41,#0c3);transition:width .5s ease-out;box-shadow:0 0 8px #00ff4199}.progress-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:10px;color:#00ff41;letter-spacing:1px}.collected[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#00ff41}.separator[_ngcontent-%COMP%]{color:#00ff4199}.total[_ngcontent-%COMP%]{color:#00ff41cc}.label[_ngcontent-%COMP%]{margin-left:4px;font-size:8px;color:#00ff4199}@keyframes _ngcontent-%COMP%_collect{0%{transform:translate(-50%,-50%) scale(1) rotate(0);opacity:1}50%{transform:translate(-50%,-50%) scale(1.5) rotate(180deg);opacity:.5}to{transform:translate(-50%,-50%) scale(0) rotate(360deg);opacity:0}}.scrap-item.collecting[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_collect .6s ease-out forwards;pointer-events:none}@media (max-width: 768px){.scrap-item[_ngcontent-%COMP%]{width:28px;height:28px}.collection-progress[_ngcontent-%COMP%]{top:10px;right:10px;padding:8px 12px}.progress-bar[_ngcontent-%COMP%]{width:100px}.progress-text[_ngcontent-%COMP%]{font-size:10px}.collected[_ngcontent-%COMP%]{font-size:14px}}']})}}return t})();var gi=(()=>{class t{constructor(e){this.el=e,this.decryptSpeed=30,this.decryptDelay=0,this.decryptChars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()",this.decryptIterations=8,this.originalText=""}ngOnInit(){this.originalText=this.el.nativeElement.textContent||"",this.observer=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&(this.startDecryption(),this.observer?.unobserve(this.el.nativeElement))})}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.decryptInterval&&window.clearInterval(this.decryptInterval),this.observer?.disconnect()}startDecryption(){this.originalText&&setTimeout(()=>{this.decrypt()},this.decryptDelay)}decrypt(){let e=this.originalText.length,n=0;this.decryptInterval=window.setInterval(()=>{let i=this.originalText.split("").map((o,a)=>a<n?this.originalText[a]:o===" "?" ":this.getRandomChar()).join("");this.el.nativeElement.textContent=i,n+=1/this.decryptIterations,n>=e&&(this.el.nativeElement.textContent=this.originalText,this.decryptInterval&&window.clearInterval(this.decryptInterval))},this.decryptSpeed)}getRandomChar(){return this.decryptChars[Math.floor(Math.random()*this.decryptChars.length)]}triggerDecrypt(){this.decryptInterval&&window.clearInterval(this.decryptInterval),this.startDecryption()}static{this.\u0275fac=function(n){return new(n||t)(J(He))}}static{this.\u0275dir=wt({type:t,selectors:[["","appDecryptText",""]],inputs:{decryptSpeed:"decryptSpeed",decryptDelay:"decryptDelay",decryptChars:"decryptChars",decryptIterations:"decryptIterations"},standalone:!0})}}return t})();var Rn=class extends qr{constructor(){super(...arguments),this.supportsDOMEvents=!0}},In=class t extends Rn{static makeCurrent(){Zr(new t)}onAndCancel(r,e,n){return r.addEventListener(e,n),()=>{r.removeEventListener(e,n)}}dispatchEvent(r,e){r.dispatchEvent(e)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,e){return e=e||this.getDefaultDocument(),e.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,e){return e==="window"?window:e==="document"?r:e==="body"?r.body:null}getBaseHref(r){let e=Eo();return e==null?null:To(e)}resetBaseElement(){Ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return Kr(document.cookie,r)}},Ke=null;function Eo(){return Ke=Ke||document.querySelector("base"),Ke?Ke.getAttribute("href"):null}function To(t){return new URL(t,document.baseURI).pathname}var ko=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),En=new L(""),bi=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i){return this._findPluginFor(n).addEventListener(e,n,i)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new D(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||t)(w(En),w(W))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),It=class{constructor(r){this._doc=r}},Pn="ng-app-id",Ci=(()=>{class t{constructor(e,n,i,o={}){this.doc=e,this.appId=n,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wn(o),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(i=>i.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Pn}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(i=>{i.textContent!=null&&n.set(i.textContent,i)}),n}return null}changeUsageCount(e,n){let i=this.styleRef;if(i.has(e)){let o=i.get(e);return o.usage+=n,o.usage}return i.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let i=this.styleNodesInDOM,o=i?.get(n);if(o?.parentNode===e)return i.delete(n),o.removeAttribute(Pn),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=n,this.platformIsServer&&a.setAttribute(Pn,this.appId),e.appendChild(a),a}}addStyleToHost(e,n){let i=this.getStyleElement(e,n),o=this.styleRef,a=o.get(n)?.elements;a?a.push(i):o.set(n,{elements:[i],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||t)(w(K),w(dn),w(un,8),w(ve))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),On={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},An=/%COMP%/g,xi="%COMP%",Ao=`_nghost-${xi}`,Do=`_ngcontent-${xi}`,zo=!0,No=new L("",{providedIn:"root",factory:()=>zo});function Lo(t){return Do.replace(An,t)}function Uo(t){return Ao.replace(An,t)}function yi(t,r){return r.map(e=>e.replace(An,t))}var fi=(()=>{class t{constructor(e,n,i,o,a,c,s,l=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=s,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=wn(c),this.defaultRenderer=new Qe(e,a,s,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Fe.ShadowDom&&(n=k(p({},n),{encapsulation:Fe.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof Et?i.applyToHost(e):i instanceof Xe&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,o=i.get(n.id);if(!o){let a=this.doc,c=this.ngZone,s=this.eventManager,l=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(n.encapsulation){case Fe.Emulated:o=new Et(s,l,n,this.appId,g,a,c,m);break;case Fe.ShadowDom:return new Tn(s,l,e,n,a,c,this.nonce,m);default:o=new Xe(s,l,n,g,a,c,m);break}i.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||t)(w(bi),w(Ci),w(dn),w(No),w(K),w(ve),w(W),w(un))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),Qe=class{constructor(r,e,n,i){this.eventManager=r,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,e){return e?this.doc.createElementNS(On[e]||e,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,e){(mi(r)?r.content:r).appendChild(e)}insertBefore(r,e,n){r&&(mi(r)?r.content:r).insertBefore(e,n)}removeChild(r,e){r&&r.removeChild(e)}selectRootElement(r,e){let n=typeof r=="string"?this.doc.querySelector(r):r;if(!n)throw new D(-5104,!1);return e||(n.textContent=""),n}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,e,n,i){if(i){e=i+":"+e;let o=On[i];o?r.setAttributeNS(o,e,n):r.setAttribute(e,n)}else r.setAttribute(e,n)}removeAttribute(r,e,n){if(n){let i=On[n];i?r.removeAttributeNS(i,e):r.removeAttribute(`${n}:${e}`)}else r.removeAttribute(e)}addClass(r,e){r.classList.add(e)}removeClass(r,e){r.classList.remove(e)}setStyle(r,e,n,i){i&(Be.DashCase|Be.Important)?r.style.setProperty(e,n,i&Be.Important?"important":""):r.style[e]=n}removeStyle(r,e,n){n&Be.DashCase?r.style.removeProperty(e):r.style[e]=""}setProperty(r,e,n){r!=null&&(r[e]=n)}setValue(r,e){r.nodeValue=e}listen(r,e,n){if(typeof r=="string"&&(r=yn().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${e}`);return this.eventManager.addEventListener(r,e,this.decoratePreventDefault(n))}decoratePreventDefault(r){return e=>{if(e==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(e)):r(e))===!1&&e.preventDefault()}}};function mi(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Tn=class extends Qe{constructor(r,e,n,i,o,a,c,s){super(r,o,a,s),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=yi(i.id,i.styles);for(let g of l){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,e){return super.appendChild(this.nodeOrShadowRoot(r),e)}insertBefore(r,e,n){return super.insertBefore(this.nodeOrShadowRoot(r),e,n)}removeChild(r,e){return super.removeChild(this.nodeOrShadowRoot(r),e)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xe=class extends Qe{constructor(r,e,n,i,o,a,c,s){super(r,o,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=s?yi(s,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Et=class extends Xe{constructor(r,e,n,i,o,a,c,s){let l=i+"-"+n.id;super(r,e,n,o,a,c,s,l),this.contentAttr=Lo(l),this.hostAttr=Uo(l)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,e){let n=super.createElement(r,e);return super.setAttribute(n,this.contentAttr,""),n}},$o=(()=>{class t extends It{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i){return e.addEventListener(n,i,!1),()=>this.removeEventListener(e,n,i)}removeEventListener(e,n,i){return e.removeEventListener(n,i)}static{this.\u0275fac=function(n){return new(n||t)(w(K))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),vi=["alt","control","meta","shift"],jo={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fo={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ho=(()=>{class t extends It{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,n,i){let o=t.parseEventName(n),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yn().onAndCancel(e,o.domEventName,a))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(n.pop()),a="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),a="code."),vi.forEach(l=>{let g=n.indexOf(l);g>-1&&(n.splice(g,1),a+=l+".")}),a+=o,n.length!=0||o.length===0)return null;let s={};return s.domEventName=i,s.fullKey=a,s}static matchEventFullKeyCode(e,n){let i=jo[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vi.forEach(a=>{if(a!==i){let c=Fo[a];c(e)&&(o+=a+".")}}),o+=i,o===n)}static eventCallback(e,n,i){return o=>{t.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>n(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||t)(w(K))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})();function Ol(t,r){return Hr(p({rootComponent:t},Vo(r)))}function Vo(t){return{appProviders:[...Go,...t?.providers??[]],platformProviders:Wo}}function Bo(){In.makeCurrent()}function Zo(){return new ln}function qo(){return kr(document),document}var Wo=[{provide:ve,useValue:Jr},{provide:Ar,useValue:Bo,multi:!0},{provide:K,useFactory:qo,deps:[]}];var Go=[{provide:Tr,useValue:"root"},{provide:ln,useFactory:Zo,deps:[]},{provide:En,useClass:$o,multi:!0,deps:[K,W,ve]},{provide:En,useClass:Ho,multi:!0,deps:[K]},fi,Ci,bi,{provide:Nr,useExisting:fi},{provide:ni,useClass:ko,deps:[]},[]];var _i=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||t)(w(K))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var kn=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(kn||{});function Rl(...t){let r=[],e=new Set,n=e.has(kn.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)e.add(o),i.length&&r.push(i);return Mt([[],Vr(),e.has(kn.NoHttpTransferCache)||n?[]:ri({}),r])}var C="primary",gt=Symbol("RouteTitle"),Un=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e[0]:e}return null}getAll(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ke(t){return new Un(t)}function Ko(t,r,e){let n=e.path.split("/");if(n.length>t.length||e.pathMatch==="full"&&(r.hasChildren()||n.length<t.length))return null;let i={};for(let o=0;o<n.length;o++){let a=n[o],c=t[o];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,n.length),posParams:i}}function Qo(t,r){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!te(t[e],r[e]))return!1;return!0}function te(t,r){let e=t?$n(t):void 0,n=r?$n(r):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Ti(t[i],r[i]))return!1;return!0}function $n(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ti(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let e=[...t].sort(),n=[...r].sort();return e.every((i,o)=>n[o]===i)}else return t===r}function ki(t){return t.length>0?t[t.length-1]:null}function he(t){return yr(t)?t:Fr(t)?$(Promise.resolve(t)):v(t)}var Xo={exact:Di,subset:zi},Ai={exact:Jo,subset:ea,ignored:()=>!0};function wi(t,r,e){return Xo[e.paths](t.root,r.root,e.matrixParams)&&Ai[e.queryParams](t.queryParams,r.queryParams)&&!(e.fragment==="exact"&&t.fragment!==r.fragment)}function Jo(t,r){return te(t,r)}function Di(t,r,e){if(!xe(t.segments,r.segments)||!At(t.segments,r.segments,e)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let n in r.children)if(!t.children[n]||!Di(t.children[n],r.children[n],e))return!1;return!0}function ea(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(e=>Ti(t[e],r[e]))}function zi(t,r,e){return Ni(t,r,r.segments,e)}function Ni(t,r,e,n){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!xe(i,e)||r.hasChildren()||!At(i,e,n))}else if(t.segments.length===e.length){if(!xe(t.segments,e)||!At(t.segments,e,n))return!1;for(let i in r.children)if(!t.children[i]||!zi(t.children[i],r.children[i],n))return!1;return!0}else{let i=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!xe(t.segments,i)||!At(t.segments,i,n)||!t.children[C]?!1:Ni(t.children[C],r,o,n)}}function At(t,r,e){return r.every((n,i)=>Ai[e](t[i].parameters,n.parameters))}var de=class{constructor(r=new M([],{}),e={},n=null){this.root=r,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ke(this.queryParams),this._queryParamMap}toString(){return ra.serialize(this)}},M=class{constructor(r,e){this.segments=r,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dt(this)}},Ce=class{constructor(r,e){this.path=r,this.parameters=e}get parameterMap(){return this._parameterMap??=ke(this.parameters),this._parameterMap}toString(){return Ui(this)}};function ta(t,r){return xe(t,r)&&t.every((e,n)=>te(e.parameters,r[n].parameters))}function xe(t,r){return t.length!==r.length?!1:t.every((e,n)=>e.path===r[n].path)}function na(t,r){let e=[];return Object.entries(t.children).forEach(([n,i])=>{n===C&&(e=e.concat(r(i,n)))}),Object.entries(t.children).forEach(([n,i])=>{n!==C&&(e=e.concat(r(i,n)))}),e}var ft=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:()=>new ot,providedIn:"root"})}}return t})(),ot=class{parse(r){let e=new Fn(r);return new de(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(r){let e=`/${Je(r.root,!0)}`,n=aa(r.queryParams),i=typeof r.fragment=="string"?`#${ia(r.fragment)}`:"";return`${e}${n}${i}`}},ra=new ot;function Dt(t){return t.segments.map(r=>Ui(r)).join("/")}function Je(t,r){if(!t.hasChildren())return Dt(t);if(r){let e=t.children[C]?Je(t.children[C],!1):"",n=[];return Object.entries(t.children).forEach(([i,o])=>{i!==C&&n.push(`${i}:${Je(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=na(t,(n,i)=>i===C?[Je(t.children[C],!1)]:[`${i}:${Je(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[C]!=null?`${Dt(t)}/${e[0]}`:`${Dt(t)}/(${e.join("//")})`}}function Li(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tt(t){return Li(t).replace(/%3B/gi,";")}function ia(t){return encodeURI(t)}function jn(t){return Li(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zt(t){return decodeURIComponent(t)}function Mi(t){return zt(t.replace(/\+/g,"%20"))}function Ui(t){return`${jn(t.path)}${oa(t.parameters)}`}function oa(t){return Object.entries(t).map(([r,e])=>`;${jn(r)}=${jn(e)}`).join("")}function aa(t){let r=Object.entries(t).map(([e,n])=>Array.isArray(n)?n.map(i=>`${Tt(e)}=${Tt(i)}`).join("&"):`${Tt(e)}=${Tt(n)}`).filter(e=>e);return r.length?`?${r.join("&")}`:""}var sa=/^[^\/()?;#]+/;function Dn(t){let r=t.match(sa);return r?r[0]:""}var ca=/^[^\/()?;=#]+/;function la(t){let r=t.match(ca);return r?r[0]:""}var da=/^[^=?&#]+/;function ua(t){let r=t.match(da);return r?r[0]:""}var pa=/^[^&#]+/;function ha(t){let r=t.match(pa);return r?r[0]:""}var Fn=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new M([],{}):new M([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(r.length>0||Object.keys(e).length>0)&&(n[C]=new M(r,e)),n}parseSegment(){let r=Dn(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(r),new Ce(zt(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let e=la(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let i=Dn(this.remaining);i&&(n=i,this.capture(n))}r[zt(e)]=zt(n)}parseQueryParam(r){let e=ua(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let a=ha(this.remaining);a&&(n=a,this.capture(n))}let i=Mi(e),o=Mi(n);if(r.hasOwnProperty(i)){let a=r[i];Array.isArray(a)||(a=[a],r[i]=a),a.push(o)}else r[i]=o}parseParens(r){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Dn(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):r&&(o=C);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[C]:new M([],a),this.consumeOptional("//")}return e}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new D(4011,!1)}};function $i(t){return t.segments.length>0?new M([],{[C]:t}):t}function ji(t){let r={};for(let[n,i]of Object.entries(t.children)){let o=ji(i);if(n===C&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))r[a]=c;else(o.segments.length>0||o.hasChildren())&&(r[n]=o)}let e=new M(t.segments,r);return ga(e)}function ga(t){if(t.numberOfChildren===1&&t.children[C]){let r=t.children[C];return new M(t.segments.concat(r.segments),r.children)}return t}function Ae(t){return t instanceof de}function fa(t,r,e=null,n=null){let i=Fi(t);return Hi(i,r,e,n)}function Fi(t){let r;function e(o){let a={};for(let s of o.children){let l=e(s);a[s.outlet]=l}let c=new M(o.url,a);return o===t&&(r=c),c}let n=e(t.root),i=$i(n);return r??i}function Hi(t,r,e,n){let i=t;for(;i.parent;)i=i.parent;if(r.length===0)return zn(i,i,i,e,n);let o=ma(r);if(o.toRoot())return zn(i,i,new M([],{}),e,n);let a=va(o,i,t),c=a.processChildren?nt(a.segmentGroup,a.index,o.commands):Bi(a.segmentGroup,a.index,o.commands);return zn(i,a.segmentGroup,c,e,n)}function Nt(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function at(t){return typeof t=="object"&&t!=null&&t.outlets}function zn(t,r,e,n,i){let o={};n&&Object.entries(n).forEach(([s,l])=>{o[s]=Array.isArray(l)?l.map(g=>`${g}`):`${l}`});let a;t===r?a=e:a=Vi(t,r,e);let c=$i(ji(a));return new de(c,o,i)}function Vi(t,r,e){let n={};return Object.entries(t.children).forEach(([i,o])=>{o===r?n[i]=e:n[i]=Vi(o,r,e)}),new M(t.segments,n)}var Lt=class{constructor(r,e,n){if(this.isAbsolute=r,this.numberOfDoubleDots=e,this.commands=n,r&&n.length>0&&Nt(n[0]))throw new D(4003,!1);let i=n.find(at);if(i&&i!==ki(n))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ma(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lt(!0,0,t);let r=0,e=!1,n=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([s,l])=>{c[s]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((c,s)=>{s==0&&c==="."||(s==0&&c===""?e=!0:c===".."?r++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Lt(e,r,n)}var Ee=class{constructor(r,e,n){this.segmentGroup=r,this.processChildren=e,this.index=n}};function va(t,r,e){if(t.isAbsolute)return new Ee(r,!0,0);if(!e)return new Ee(r,!1,NaN);if(e.parent===null)return new Ee(e,!0,0);let n=Nt(t.commands[0])?0:1,i=e.segments.length-1+n;return ba(e,i,t.numberOfDoubleDots)}function ba(t,r,e){let n=t,i=r,o=e;for(;o>i;){if(o-=i,n=n.parent,!n)throw new D(4005,!1);i=n.segments.length}return new Ee(n,!1,i-o)}function Ca(t){return at(t[0])?t[0].outlets:{[C]:t}}function Bi(t,r,e){if(t??=new M([],{}),t.segments.length===0&&t.hasChildren())return nt(t,r,e);let n=xa(t,r,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new M(t.segments.slice(0,n.pathIndex),{});return o.children[C]=new M(t.segments.slice(n.pathIndex),t.children),nt(o,0,i)}else return n.match&&i.length===0?new M(t.segments,{}):n.match&&!t.hasChildren()?Hn(t,r,e):n.match?nt(t,0,i):Hn(t,r,e)}function nt(t,r,e){if(e.length===0)return new M(t.segments,{});{let n=Ca(e),i={};if(Object.keys(n).some(o=>o!==C)&&t.children[C]&&t.numberOfChildren===1&&t.children[C].segments.length===0){let o=nt(t.children[C],r,e);return new M(t.segments,o.children)}return Object.entries(n).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Bi(t.children[o],r,a))}),Object.entries(t.children).forEach(([o,a])=>{n[o]===void 0&&(i[o]=a)}),new M(t.segments,i)}}function xa(t,r,e){let n=0,i=r,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(n>=e.length)return o;let a=t.segments[i],c=e[n];if(at(c))break;let s=`${c}`,l=n<e.length-1?e[n+1]:null;if(i>0&&s===void 0)break;if(s&&l&&typeof l=="object"&&l.outlets===void 0){if(!Pi(s,l,a))return o;n+=2}else{if(!Pi(s,{},a))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function Hn(t,r,e){let n=t.segments.slice(0,r),i=0;for(;i<e.length;){let o=e[i];if(at(o)){let s=ya(o.outlets);return new M(n,s)}if(i===0&&Nt(e[0])){let s=t.segments[r];n.push(new Ce(s.path,Si(e[0]))),i++;continue}let a=at(o)?o.outlets[C]:`${o}`,c=i<e.length-1?e[i+1]:null;a&&c&&Nt(c)?(n.push(new Ce(a,Si(c))),i+=2):(n.push(new Ce(a,{})),i++)}return new M(n,{})}function ya(t){let r={};return Object.entries(t).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(r[e]=Hn(new M([],{}),0,n))}),r}function Si(t){let r={};return Object.entries(t).forEach(([e,n])=>r[e]=`${n}`),r}function Pi(t,r,e){return t==e.path&&te(r,e.parameters)}var rt="imperative",z=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(z||{}),Z=class{constructor(r,e){this.id=r,this.url=e}},De=class extends Z{constructor(r,e,n="imperative",i=null){super(r,e),this.type=z.NavigationStart,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ae=class extends Z{constructor(r,e,n){super(r,e),this.urlAfterRedirects=n,this.type=z.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},V=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(V||{}),Ut=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ut||{}),ue=class extends Z{constructor(r,e,n,i){super(r,e),this.reason=n,this.code=i,this.type=z.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pe=class extends Z{constructor(r,e,n,i){super(r,e),this.reason=n,this.code=i,this.type=z.NavigationSkipped}},st=class extends Z{constructor(r,e,n,i){super(r,e),this.error=n,this.target=i,this.type=z.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$t=class extends Z{constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i,this.type=z.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vn=class extends Z{constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i,this.type=z.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bn=class extends Z{constructor(r,e,n,i,o){super(r,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o,this.type=z.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zn=class extends Z{constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i,this.type=z.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qn=class extends Z{constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i,this.type=z.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wn=class{constructor(r){this.route=r,this.type=z.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gn=class{constructor(r){this.route=r,this.type=z.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yn=class{constructor(r){this.snapshot=r,this.type=z.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kn=class{constructor(r){this.snapshot=r,this.type=z.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qn=class{constructor(r){this.snapshot=r,this.type=z.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xn=class{constructor(r){this.snapshot=r,this.type=z.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jt=class{constructor(r,e,n){this.routerEvent=r,this.position=e,this.anchor=n,this.type=z.Scroll}toString(){let r=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${r}')`}},ct=class{},lt=class{constructor(r){this.url=r}};var Jn=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new mt,this.attachRef=null}},mt=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){let i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Jn,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ft=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let e=this.pathFromRoot(r);return e.length>1?e[e.length-2]:null}children(r){let e=er(r,this._root);return e?e.children.map(n=>n.value):[]}firstChild(r){let e=er(r,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(r){let e=tr(r,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return tr(r,this._root).map(e=>e.value)}};function er(t,r){if(t===r.value)return r;for(let e of r.children){let n=er(t,e);if(n)return n}return null}function tr(t,r){if(t===r.value)return[r];for(let e of r.children){let n=tr(t,e);if(n.length)return n.unshift(r),n}return[]}var H=class{constructor(r,e){this.value=r,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ie(t){let r={};return t&&t.children.forEach(e=>r[e.value.outlet]=e),r}var Ht=class extends Ft{constructor(r,e){super(r),this.snapshot=e,ur(this,r)}toString(){return this.snapshot.toString()}};function Zi(t){let r=_a(t),e=new B([new Ce("",{})]),n=new B({}),i=new B({}),o=new B({}),a=new B(""),c=new ye(e,n,o,a,i,C,t,r.root);return c.snapshot=r.root,new Ht(new H(c,[]),r)}function _a(t){let r={},e={},n={},i="",o=new dt([],r,n,i,e,C,t,null,{});return new Vt("",new H(o,[]))}var ye=class{constructor(r,e,n,i,o,a,c,s){this.urlSubject=r,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=s,this.title=this.dataSubject?.pipe(O(l=>l[gt]))??v(void 0),this.url=r,this.params=e,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(O(r=>ke(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(O(r=>ke(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dr(t,r,e="emptyOnly"){let n,{routeConfig:i}=t;return r!==null&&(e==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?n={params:p(p({},r.params),t.params),data:p(p({},r.data),t.data),resolve:p(p(p(p({},t.data),r.data),i?.data),t._resolvedData)}:n={params:p({},t.params),data:p({},t.data),resolve:p(p({},t.data),t._resolvedData??{})},i&&Wi(i)&&(n.resolve[gt]=i.title),n}var dt=class{get title(){return this.data?.[gt]}constructor(r,e,n,i,o,a,c,s,l){this.url=r,this.params=e,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=s,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ke(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ke(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${e}')`}},Vt=class extends Ft{constructor(r,e){super(e),this.url=r,ur(this,e)}toString(){return qi(this._root)}};function ur(t,r){r.value._routerState=t,r.children.forEach(e=>ur(t,e))}function qi(t){let r=t.children.length>0?` { ${t.children.map(qi).join(", ")} } `:"";return`${t.value}${r}`}function Nn(t){if(t.snapshot){let r=t.snapshot,e=t._futureSnapshot;t.snapshot=e,te(r.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),r.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),te(r.params,e.params)||t.paramsSubject.next(e.params),Qo(r.url,e.url)||t.urlSubject.next(e.url),te(r.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nr(t,r){let e=te(t.params,r.params)&&ta(t.url,r.url),n=!t.parent!=!r.parent;return e&&!n&&(!t.parent||nr(t.parent,r.parent))}function Wi(t){return typeof t.title=="string"||t.title===null}var wa=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=C,this.activateEvents=new ie,this.deactivateEvents=new ie,this.attachEvents=new ie,this.detachEvents=new ie,this.parentContexts=f(mt),this.location=f(Lr),this.changeDetector=f(Cn),this.environmentInjector=f(Se),this.inputBinder=f(Wt,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=e;let i=this.location,a=e.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,s=new rr(e,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:s,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275dir=wt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pe]})}}return t})(),rr=class t{__ngOutletInjector(r){return new t(this.route,this.childContexts,r)}constructor(r,e,n){this.route=r,this.childContexts=e,this.parent=n}get(r,e){return r===ye?this.route:r===mt?this.childContexts:this.parent.get(r,e)}},Wt=new L(""),Oi=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,i=yt([n.queryParams,n.params,n.data]).pipe(q(([o,a,c],s)=>(c=p(p(p({},o),a),c),s===0?v(c):Promise.resolve(c)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let a=Br(n.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:c}of a.inputs)e.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(e,i)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})();function Ma(t,r,e){let n=ut(t,r._root,e?e._root:void 0);return new Ht(n,r)}function ut(t,r,e){if(e&&t.shouldReuseRoute(r.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=r.value;let i=Sa(t,r,e);return new H(n,i)}else{if(t.shouldAttach(r.value)){let o=t.retrieve(r.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(c=>ut(t,c)),a}}let n=Pa(r.value),i=r.children.map(o=>ut(t,o));return new H(n,i)}}function Sa(t,r,e){return r.children.map(n=>{for(let i of e.children)if(t.shouldReuseRoute(n.value,i.value.snapshot))return ut(t,n,i);return ut(t,n)})}function Pa(t){return new ye(new B(t.url),new B(t.params),new B(t.queryParams),new B(t.fragment),new B(t.data),t.outlet,t.component,t)}var Gi="ngNavigationCancelingError";function Yi(t,r){let{redirectTo:e,navigationBehaviorOptions:n}=Ae(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=Ki(!1,V.Redirect);return i.url=e,i.navigationBehaviorOptions=n,i}function Ki(t,r){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[Gi]=!0,e.cancellationCode=r,e}function Oa(t){return Qi(t)&&Ae(t.url)}function Qi(t){return!!t&&t[Gi]}var Ra=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=X({type:t,selectors:[["ng-component"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(n,i){n&1&&P(0,"router-outlet")},dependencies:[wa],encapsulation:2})}}return t})();function Ia(t,r){return t.providers&&!t._injector&&(t._injector=hn(t.providers,r,`Route: ${t.path}`)),t._injector??r}function pr(t){let r=t.children&&t.children.map(pr),e=r?k(p({},t),{children:r}):p({},t);return!e.component&&!e.loadComponent&&(r||e.loadChildren)&&e.outlet&&e.outlet!==C&&(e.component=Ra),e}function ne(t){return t.outlet||C}function Ea(t,r){let e=t.filter(n=>ne(n)===r);return e.push(...t.filter(n=>ne(n)!==r)),e}function vt(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let e=r.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Ta=(t,r,e,n)=>O(i=>(new ir(r,i.targetRouterState,i.currentRouterState,e,n).activate(t),i)),ir=class{constructor(r,e,n,i,o){this.routeReuseStrategy=r,this.futureState=e,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(r){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,r),Nn(this.futureState.root),this.activateChildRoutes(e,n,r)}deactivateChildRoutes(r,e,n){let i=Ie(e);r.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],n),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(r,e,n){let i=r.value,o=e?e.value:null;if(i===o)if(i.component){let a=n.getContext(i.outlet);a&&this.deactivateChildRoutes(r,e,a.children)}else this.deactivateChildRoutes(r,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(r,e){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,e):this.deactivateRouteAndOutlet(r,e)}detachAndStoreRouteSubtree(r,e){let n=e.getContext(r.value.outlet),i=n&&r.value.component?n.children:e,o=Ie(r);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(n&&n.outlet){let a=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:c})}}deactivateRouteAndOutlet(r,e){let n=e.getContext(r.value.outlet),i=n&&r.value.component?n.children:e,o=Ie(r);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(r,e,n){let i=Ie(e);r.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new Xn(o.value.snapshot))}),r.children.length&&this.forwardEvent(new Kn(r.value.snapshot))}activateRoutes(r,e,n){let i=r.value,o=e?e.value:null;if(Nn(i),i===o)if(i.component){let a=n.getOrCreateContext(i.outlet);this.activateChildRoutes(r,e,a.children)}else this.activateChildRoutes(r,e,n);else if(i.component){let a=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Nn(c.route.value),this.activateChildRoutes(r,null,a.children)}else{let c=vt(i.snapshot);a.attachRef=null,a.route=i,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,n)}},Bt=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},Te=class{constructor(r,e){this.component=r,this.route=e}};function ka(t,r,e){let n=t._root,i=r?r._root:null;return et(n,i,e,[n.value])}function Aa(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function Ne(t,r){let e=Symbol(),n=r.get(t,e);return n===e?typeof t=="function"&&!Ir(t)?t:r.get(t):n}function et(t,r,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ie(r);return t.children.forEach(a=>{Da(a,o[a.value.outlet],e,n.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>it(c,e.getContext(a),i)),i}function Da(t,r,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=r?r.value:null,c=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let s=za(a,o,o.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new Bt(n)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?et(t,r,c?c.children:null,n,i):et(t,r,e,n,i),s&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Te(c.outlet.component,a))}else a&&it(r,c,i),i.canActivateChecks.push(new Bt(n)),o.component?et(t,null,c?c.children:null,n,i):et(t,null,e,n,i);return i}function za(t,r,e){if(typeof e=="function")return e(t,r);switch(e){case"pathParamsChange":return!xe(t.url,r.url);case"pathParamsOrQueryParamsChange":return!xe(t.url,r.url)||!te(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nr(t,r)||!te(t.queryParams,r.queryParams);case"paramsChange":default:return!nr(t,r)}}function it(t,r,e){let n=Ie(t),i=t.value;Object.entries(n).forEach(([o,a])=>{i.component?r?it(a,r.children.getContext(o),e):it(a,null,e):it(a,r,e)}),i.component?r&&r.outlet&&r.outlet.isActivated?e.canDeactivateChecks.push(new Te(r.outlet.component,i)):e.canDeactivateChecks.push(new Te(null,i)):e.canDeactivateChecks.push(new Te(null,i))}function bt(t){return typeof t=="function"}function Na(t){return typeof t=="boolean"}function La(t){return t&&bt(t.canLoad)}function Ua(t){return t&&bt(t.canActivate)}function $a(t){return t&&bt(t.canActivateChild)}function ja(t){return t&&bt(t.canDeactivate)}function Fa(t){return t&&bt(t.canMatch)}function Xi(t){return t instanceof _r||t?.name==="EmptyError"}var kt=Symbol("INITIAL_VALUE");function ze(){return q(t=>yt(t.map(r=>r.pipe(Me(1),Or(kt)))).pipe(O(r=>{for(let e of r)if(e!==!0){if(e===kt)return kt;if(e===!1||e instanceof de)return e}return!0}),me(r=>r!==kt),Me(1)))}function Ha(t,r){return j(e=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?v(k(p({},e),{guardsResult:!0})):Va(a,n,i,t).pipe(j(c=>c&&Na(c)?Ba(n,o,t,r):v(c)),O(c=>k(p({},e),{guardsResult:c})))})}function Va(t,r,e,n){return $(t).pipe(j(i=>Ya(i.component,i.route,e,r,n)),ce(i=>i!==!0,!0))}function Ba(t,r,e,n){return $(r).pipe(we(i=>wr(qa(i.route.parent,n),Za(i.route,n),Ga(t,i.path,e),Wa(t,i.route,e))),ce(i=>i!==!0,!0))}function Za(t,r){return t!==null&&r&&r(new Qn(t)),v(!0)}function qa(t,r){return t!==null&&r&&r(new Yn(t)),v(!0)}function Wa(t,r,e){let n=r.routeConfig?r.routeConfig.canActivate:null;if(!n||n.length===0)return v(!0);let i=n.map(o=>Jt(()=>{let a=vt(r)??e,c=Ne(o,a),s=Ua(c)?c.canActivate(r,t):le(a,()=>c(r,t));return he(s).pipe(ce())}));return v(i).pipe(ze())}function Ga(t,r,e){let n=r[r.length-1],o=r.slice(0,r.length-1).reverse().map(a=>Aa(a)).filter(a=>a!==null).map(a=>Jt(()=>{let c=a.guards.map(s=>{let l=vt(a.node)??e,g=Ne(s,l),m=$a(g)?g.canActivateChild(n,t):le(l,()=>g(n,t));return he(m).pipe(ce())});return v(c).pipe(ze())}));return v(o).pipe(ze())}function Ya(t,r,e,n,i){let o=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!o||o.length===0)return v(!0);let a=o.map(c=>{let s=vt(r)??i,l=Ne(c,s),g=ja(l)?l.canDeactivate(t,r,e,n):le(s,()=>l(t,r,e,n));return he(g).pipe(ce())});return v(a).pipe(ze())}function Ka(t,r,e,n){let i=r.canLoad;if(i===void 0||i.length===0)return v(!0);let o=i.map(a=>{let c=Ne(a,t),s=La(c)?c.canLoad(r,e):le(t,()=>c(r,e));return he(s)});return v(o).pipe(ze(),Ji(n))}function Ji(t){return xr(N(r=>{if(Ae(r))throw Yi(t,r)}),O(r=>r===!0))}function Qa(t,r,e,n){let i=r.canMatch;if(!i||i.length===0)return v(!0);let o=i.map(a=>{let c=Ne(a,t),s=Fa(c)?c.canMatch(r,e):le(t,()=>c(r,e));return he(s)});return v(o).pipe(ze(),Ji(n))}var pt=class{constructor(r){this.segmentGroup=r||null}},Zt=class extends Error{constructor(r){super(),this.urlTree=r}};function Re(t){return je(new pt(t))}function Xa(t){return je(new D(4e3,!1))}function Ja(t){return je(Ki(!1,V.GuardRejected))}var or=class{constructor(r,e){this.urlSerializer=r,this.urlTree=e}lineralizeSegments(r,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return v(n);if(i.numberOfChildren>1||!i.children[C])return Xa(r.redirectTo);i=i.children[C]}}applyRedirectCommands(r,e,n){let i=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),r,n);if(e.startsWith("/"))throw new Zt(i);return i}applyRedirectCreateUrlTree(r,e,n,i){let o=this.createSegmentGroup(r,e.root,n,i);return new de(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(r,e){let n={};return Object.entries(r).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);n[i]=e[c]}else n[i]=o}),n}createSegmentGroup(r,e,n,i){let o=this.createSegments(r,e.segments,n,i),a={};return Object.entries(e.children).forEach(([c,s])=>{a[c]=this.createSegmentGroup(r,s,n,i)}),new M(o,a)}createSegments(r,e,n,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(r,o,i):this.findOrReturn(o,n))}findPosParam(r,e,n){let i=n[e.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(r,e){let n=0;for(let i of e){if(i.path===r.path)return e.splice(n),i;n++}return r}},ar={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function es(t,r,e,n,i){let o=hr(t,r,e);return o.matched?(n=Ia(r,n),Qa(n,r,e,i).pipe(O(a=>a===!0?o:p({},ar)))):v(o)}function hr(t,r,e){if(r.path==="**")return ts(e);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||e.length>0)?p({},ar):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(r.matcher||Ko)(e,t,r);if(!i)return p({},ar);let o={};Object.entries(i.posParams??{}).forEach(([c,s])=>{o[c]=s.path});let a=i.consumed.length>0?p(p({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function ts(t){return{matched:!0,parameters:t.length>0?ki(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ri(t,r,e,n){return e.length>0&&is(t,e,n)?{segmentGroup:new M(r,rs(n,new M(e,t.children))),slicedSegments:[]}:e.length===0&&os(t,e,n)?{segmentGroup:new M(t.segments,ns(t,e,n,t.children)),slicedSegments:e}:{segmentGroup:new M(t.segments,t.children),slicedSegments:e}}function ns(t,r,e,n){let i={};for(let o of e)if(Gt(t,r,o)&&!n[ne(o)]){let a=new M([],{});i[ne(o)]=a}return p(p({},n),i)}function rs(t,r){let e={};e[C]=r;for(let n of t)if(n.path===""&&ne(n)!==C){let i=new M([],{});e[ne(n)]=i}return e}function is(t,r,e){return e.some(n=>Gt(t,r,n)&&ne(n)!==C)}function os(t,r,e){return e.some(n=>Gt(t,r,n))}function Gt(t,r,e){return(t.hasChildren()||r.length>0)&&e.pathMatch==="full"?!1:e.path===""}function as(t,r,e,n){return ne(t)!==n&&(n===C||!Gt(r,e,t))?!1:hr(r,t,e).matched}function ss(t,r,e){return r.length===0&&!t.children[e]}var sr=class{};function cs(t,r,e,n,i,o,a="emptyOnly"){return new cr(t,r,e,n,i,a,o).recognize()}var ls=31,cr=class{constructor(r,e,n,i,o,a,c){this.injector=r,this.configLoader=e,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new or(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new D(4002,`'${r.segmentGroup}'`)}recognize(){let r=Ri(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(O(e=>{let n=new dt([],Object.freeze({}),Object.freeze(p({},this.urlTree.queryParams)),this.urlTree.fragment,{},C,this.rootComponentType,null,{}),i=new H(n,e),o=new Vt("",i),a=fa(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(r){return this.processSegmentGroup(this.injector,this.config,r,C).pipe(_e(n=>{if(n instanceof Zt)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof pt?this.noMatchError(n):n}))}inheritParamsAndData(r,e){let n=r.value,i=dr(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),r.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(r,e,n,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(r,e,n):this.processSegment(r,e,n,n.segments,i,!0).pipe(O(o=>o instanceof H?[o]:[]))}processChildren(r,e,n){let i=[];for(let o of Object.keys(n.children))o==="primary"?i.unshift(o):i.push(o);return $(i).pipe(we(o=>{let a=n.children[o],c=Ea(e,o);return this.processSegmentGroup(r,c,a,o)}),Pr((o,a)=>(o.push(...a),o)),en(null),Sr(),j(o=>{if(o===null)return Re(n);let a=eo(o);return ds(a),v(a)}))}processSegment(r,e,n,i,o,a){return $(e).pipe(we(c=>this.processSegmentAgainstRoute(c._injector??r,e,c,n,i,o,a).pipe(_e(s=>{if(s instanceof pt)return v(null);throw s}))),ce(c=>!!c),_e(c=>{if(Xi(c))return ss(n,i,o)?v(new sr):Re(n);throw c}))}processSegmentAgainstRoute(r,e,n,i,o,a,c){return as(n,i,o,a)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,n,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(r,i,e,n,o,a):Re(i):Re(i)}expandSegmentAgainstRouteUsingRedirect(r,e,n,i,o,a){let{matched:c,consumedSegments:s,positionalParamSegments:l,remainingSegments:g}=hr(e,i,o);if(!c)return Re(e);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ls&&(this.allowRedirects=!1));let m=this.applyRedirects.applyRedirectCommands(s,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,m).pipe(j(T=>this.processSegment(r,n,e,T.concat(g),a,!1)))}matchSegmentAgainstRoute(r,e,n,i,o){let a=es(e,n,i,r,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(q(c=>c.matched?(r=n._injector??r,this.getChildConfig(r,n,i).pipe(q(({routes:s})=>{let l=n._loadedInjector??r,{consumedSegments:g,remainingSegments:m,parameters:T}=c,Le=new dt(g,T,Object.freeze(p({},this.urlTree.queryParams)),this.urlTree.fragment,ps(n),ne(n),n.component??n._loadedComponent??null,n,hs(n)),{segmentGroup:Ue,slicedSegments:$e}=Ri(e,g,m,s);if($e.length===0&&Ue.hasChildren())return this.processChildren(l,s,Ue).pipe(O(ge=>ge===null?null:new H(Le,ge)));if(s.length===0&&$e.length===0)return v(new H(Le,[]));let Yt=ne(n)===o;return this.processSegment(l,s,Ue,$e,Yt?C:o,!0).pipe(O(ge=>new H(Le,ge instanceof H?[ge]:[])))}))):Re(e)))}getChildConfig(r,e,n){return e.children?v({routes:e.children,injector:r}):e.loadChildren?e._loadedRoutes!==void 0?v({routes:e._loadedRoutes,injector:e._loadedInjector}):Ka(r,e,n,this.urlSerializer).pipe(j(i=>i?this.configLoader.loadChildren(r,e).pipe(N(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):Ja(e))):v({routes:[],injector:r})}};function ds(t){t.sort((r,e)=>r.value.outlet===C?-1:e.value.outlet===C?1:r.value.outlet.localeCompare(e.value.outlet))}function us(t){let r=t.value.routeConfig;return r&&r.path===""}function eo(t){let r=[],e=new Set;for(let n of t){if(!us(n)){r.push(n);continue}let i=r.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),e.add(i)):r.push(n)}for(let n of e){let i=eo(n.children);r.push(new H(n.value,i))}return r.filter(n=>!e.has(n))}function ps(t){return t.data||{}}function hs(t){return t.resolve||{}}function gs(t,r,e,n,i,o){return j(a=>cs(t,r,e,n,a.extractedUrl,i,o).pipe(O(({state:c,tree:s})=>k(p({},a),{targetSnapshot:c,urlAfterRedirects:s}))))}function fs(t,r){return j(e=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return v(e);let o=new Set(i.map(s=>s.route)),a=new Set;for(let s of o)if(!a.has(s))for(let l of to(s))a.add(l);let c=0;return $(a).pipe(we(s=>o.has(s)?ms(s,n,t,r):(s.data=dr(s,s.parent,t).resolve,v(void 0))),N(()=>c++),tn(1),j(s=>c===a.size?v(e):se))})}function to(t){let r=t.children.map(e=>to(e)).flat();return[t,...r]}function ms(t,r,e,n){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Wi(i)&&(o[gt]=i.title),vs(o,t,r,n).pipe(O(a=>(t._resolvedData=a,t.data=dr(t,t.parent,e).resolve,null)))}function vs(t,r,e,n){let i=$n(t);if(i.length===0)return v({});let o={};return $(i).pipe(j(a=>bs(t[a],r,e,n).pipe(ce(),N(c=>{o[a]=c}))),tn(1),Mr(o),_e(a=>Xi(a)?se:je(a)))}function bs(t,r,e,n){let i=vt(r)??n,o=Ne(t,i),a=o.resolve?o.resolve(r,e):le(i,()=>o(r,e));return he(a)}function Ln(t){return q(r=>{let e=t(r);return e?$(e).pipe(O(()=>r)):v(r)})}var no=(()=>{class t{buildTitle(e){let n,i=e.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===C);return n}getResolvedTitleForRoute(e){return e.data[gt]}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:()=>f(Cs),providedIn:"root"})}}return t})(),Cs=(()=>{class t extends no{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||t)(w(_i))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ct=new L("",{providedIn:"root",factory:()=>({})}),ht=new L(""),gr=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=f(Pt)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return v(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=he(e.loadComponent()).pipe(O(ro),N(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),_t(()=>{this.componentLoaders.delete(e)})),i=new Qt(n,()=>new fe).pipe(Kt());return this.componentLoaders.set(e,i),i}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return v({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=xs(n,this.compiler,e,this.onLoadEndListener).pipe(_t(()=>{this.childrenLoaders.delete(n)})),a=new Qt(o,()=>new fe).pipe(Kt());return this.childrenLoaders.set(n,a),a}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xs(t,r,e,n){return he(t.loadChildren()).pipe(O(ro),j(i=>i instanceof Ur||Array.isArray(i)?v(i):$(r.compileModuleAsync(i))),O(i=>{n&&n(t);let o,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(o=i.create(e).injector,a=o.get(ht,[],{optional:!0,self:!0}).flat()),{routes:a.map(pr),injector:o}}))}function ys(t){return t&&typeof t=="object"&&"default"in t}function ro(t){return ys(t)?t.default:t}var fr=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:()=>f(_s),providedIn:"root"})}}return t})(),_s=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),io=new L(""),oo=new L("");function ws(t,r,e){let n=t.get(oo),i=t.get(K);return t.get(W).runOutsideAngular(()=>{if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,a=new Promise(l=>{o=l}),c=i.startViewTransition(()=>(o(),Ms(t))),{onViewTransitionCreated:s}=n;return s&&le(t,()=>s({transition:c,from:r,to:e})),a})}function Ms(t){return new Promise(r=>{pn(r,{injector:t})})}var mr=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fe,this.transitionAbortSubject=new fe,this.configLoader=f(gr),this.environmentInjector=f(Se),this.urlSerializer=f(ft),this.rootContexts=f(mt),this.location=f(Ye),this.inputBindingEnabled=f(Wt,{optional:!0})!==null,this.titleStrategy=f(no),this.options=f(Ct,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=f(fr),this.createViewTransition=f(io,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>v(void 0),this.rootComponentType=null;let e=i=>this.events.next(new Wn(i)),n=i=>this.events.next(new Gn(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(k(p(p({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,i){return this.transitions=new B({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:rt,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(me(o=>o.id!==0),O(o=>k(p({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),q(o=>{let a=!1,c=!1;return v(o).pipe(q(s=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",V.SupersededByNewNavigation),se;this.currentTransition=o,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?k(p({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&g!=="reload"){let m="";return this.events.next(new pe(s.id,this.urlSerializer.serialize(s.rawUrl),m,Ut.IgnoredSameUrlNavigation)),s.resolve(null),se}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return v(s).pipe(q(m=>{let T=this.transitions?.getValue();return this.events.next(new De(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),T!==this.transitions?.getValue()?se:Promise.resolve(m)}),gs(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),N(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=k(p({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let T=new $t(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(T)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:m,extractedUrl:T,source:Le,restoredState:Ue,extras:$e}=s,Yt=new De(m,this.urlSerializer.serialize(T),Le,Ue);this.events.next(Yt);let ge=Zi(this.rootComponentType).snapshot;return this.currentTransition=o=k(p({},s),{targetSnapshot:ge,urlAfterRedirects:T,extras:k(p({},$e),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=T,v(o)}else{let m="";return this.events.next(new pe(s.id,this.urlSerializer.serialize(s.extractedUrl),m,Ut.IgnoredByUrlHandlingStrategy)),s.resolve(null),se}}),N(s=>{let l=new Vn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),O(s=>(this.currentTransition=o=k(p({},s),{guards:ka(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),o)),Ha(this.environmentInjector,s=>this.events.next(s)),N(s=>{if(o.guardsResult=s.guardsResult,Ae(s.guardsResult))throw Yi(this.urlSerializer,s.guardsResult);let l=new Bn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(l)}),me(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",V.GuardRejected),!1)),Ln(s=>{if(s.guards.canActivateChecks.length)return v(s).pipe(N(l=>{let g=new Zn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),q(l=>{let g=!1;return v(l).pipe(fs(this.paramsInheritanceStrategy,this.environmentInjector),N({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(l,"",V.NoDataFromResolver)}}))}),N(l=>{let g=new qn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}))}),Ln(s=>{let l=g=>{let m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(N(T=>{g.component=T}),O(()=>{})));for(let T of g.children)m.push(...l(T));return m};return yt(l(s.targetSnapshot.root)).pipe(en(null),Me(1))}),Ln(()=>this.afterPreactivation()),q(()=>{let{currentSnapshot:s,targetSnapshot:l}=o,g=this.createViewTransition?.(this.environmentInjector,s.root,l.root);return g?$(g).pipe(O(()=>o)):v(o)}),O(s=>{let l=Ma(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=o=k(p({},s),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),N(()=>{this.events.next(new ct)}),Ta(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Me(1),N({next:s=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ae(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{a=!0}}),Rr(this.transitionAbortSubject.pipe(N(s=>{throw s}))),_t(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",V.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_e(s=>{if(c=!0,Qi(s))this.events.next(new ue(o.id,this.urlSerializer.serialize(o.extractedUrl),s.message,s.cancellationCode)),Oa(s)?this.events.next(new lt(s.url)):o.resolve(!1);else{this.events.next(new st(o.id,this.urlSerializer.serialize(o.extractedUrl),s,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(s))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return se}))}))}cancelNavigationTransition(e,n,i){let o=new ue(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ss(t){return t!==rt}var Ps=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:()=>f(Os),providedIn:"root"})}}return t})(),lr=class{shouldDetach(r){return!1}store(r,e){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,e){return r.routeConfig===e.routeConfig}},Os=(()=>{class t extends lr{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=sn(t)))(i||t)}})()}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ao=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:()=>f(Rs),providedIn:"root"})}}return t})(),Rs=(()=>{class t extends ao{constructor(){super(...arguments),this.location=f(Ye),this.urlSerializer=f(ft),this.options=f(Ct,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=f(fr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new de,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof De)this.stateMemento=this.createStateMemento();else if(e instanceof pe)this.rawUrlTree=n.initialUrl;else if(e instanceof $t){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(i,n)}}else e instanceof ct?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof ue&&(e.code===V.GuardRejected||e.code===V.NoDataFromResolver)?this.restoreHistory(n):e instanceof st?this.restoreHistory(n,!0):e instanceof ae&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl){let o=this.browserPageId,a=p(p({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(i,"",a)}else{let o=p(p({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=sn(t)))(i||t)}})()}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),tt=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(tt||{});function so(t,r){t.events.pipe(me(e=>e instanceof ae||e instanceof ue||e instanceof st||e instanceof pe),O(e=>e instanceof ae||e instanceof pe?tt.COMPLETE:(e instanceof ue?e.code===V.Redirect||e.code===V.SupersededByNewNavigation:!1)?tt.REDIRECTING:tt.FAILED),me(e=>e!==tt.REDIRECTING),Me(1)).subscribe(()=>{r()})}function Is(t){throw t}var Es={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ts={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},re=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=f(St),this.stateManager=f(ao),this.options=f(Ct,{optional:!0})||{},this.pendingTasks=f($r),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=f(mr),this.urlSerializer=f(ft),this.location=f(Ye),this.urlHandlingStrategy=f(fr),this._events=new fe,this.errorHandler=this.options.errorHandler||Is,this.navigated=!1,this.routeReuseStrategy=f(Ps),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=f(ht,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!f(Wt,{optional:!0}),this.eventsSubscription=new Cr,this.isNgZoneEnabled=f(W)instanceof W&&W.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof ue&&n.code!==V.Redirect&&n.code!==V.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof ae)this.navigated=!0;else if(n instanceof lt){let a=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),c={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Ss(i.source)};this.scheduleNavigation(a,rt,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}As(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let s=p({},i);delete s.navigationId,delete s.\u0275routerPageId,Object.keys(s).length!==0&&(o.state=s)}let c=this.parseUrl(e);this.scheduleNavigation(c,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(pr),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:s}=n,l=s?this.currentUrlTree.fragment:a,g=null;switch(c){case"merge":g=p(p({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let m;try{let T=i?i.snapshot:this.routerState.snapshot.root;m=Fi(T)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),m=this.currentUrlTree.root}return Hi(m,e,g,l??null)}navigateByUrl(e,n={skipLocationChange:!1}){let i=Ae(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,rt,null,n)}navigate(e,n={skipLocationChange:!1}){return ks(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let i;if(n===!0?i=p({},Es):n===!1?i=p({},Ts):i=n,Ae(e))return wi(this.currentUrlTree,e,i);let o=this.parseUrl(e);return wi(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(e,n,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,s,l;a?(c=a.resolve,s=a.reject,l=a.promise):l=new Promise((m,T)=>{c=m,s=T});let g=this.pendingTasks.add();return so(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:c,reject:s,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ks(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new D(4008,!1)}function As(t){return!(t instanceof ct)&&!(t instanceof lt)}var qt=class{};var Ds=(()=>{class t{constructor(e,n,i,o,a){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(me(e=>e instanceof ae),we(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let i=[];for(let o of n){o.providers&&!o._injector&&(o._injector=hn(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return $(i).pipe(Xt())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(e,n):i=v(null);let o=i.pipe(j(a=>a===null?v(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(n.loadComponent&&!n._loadedComponent){let a=this.loader.loadComponent(n);return $([o,a]).pipe(Xt())}else return o})}static{this.\u0275fac=function(n){return new(n||t)(w(re),w(Pt),w(Se),w(qt),w(gr))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),co=new L(""),zs=(()=>{class t{constructor(e,n,i,o,a={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=f(Se),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof De?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ae?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof pe&&e.code===Ut.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof jt&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>br(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),pn(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new jt(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){zr()}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})();function nd(t,...r){return Mt([{provide:ht,multi:!0,useValue:t},[],{provide:ye,useFactory:lo,deps:[re]},{provide:vn,multi:!0,useFactory:uo},r.map(e=>e.\u0275providers)])}function lo(t){return t.routerState.root}function xt(t,r){return{\u0275kind:t,\u0275providers:r}}function uo(){let t=f(cn);return r=>{let e=t.get(bn);if(r!==e.components[0])return;let n=t.get(re),i=t.get(po);t.get(vr)===1&&n.initialNavigation(),t.get(ho,null,rn.Optional)?.setUpPreloading(),t.get(co,null,rn.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var po=new L("",{factory:()=>new fe}),vr=new L("",{providedIn:"root",factory:()=>1});function Ns(){return xt(2,[{provide:vr,useValue:0},{provide:mn,multi:!0,deps:[cn],useFactory:r=>{let e=r.get(Wr,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let i=r.get(re),o=r.get(po);so(i,()=>{n(!0)}),r.get(mr).afterPreactivation=()=>(n(!0),o.closed?v(void 0):o),i.initialNavigation()}))}}])}function Ls(){return xt(3,[{provide:mn,multi:!0,useFactory:()=>{let r=f(re);return()=>{r.setUpLocationChangeListener()}}},{provide:vr,useValue:2}])}var ho=new L("");function Us(t){return xt(0,[{provide:ho,useExisting:Ds},{provide:qt,useExisting:t}])}function $s(){return xt(8,[Oi,{provide:Wt,useExisting:Oi}])}function js(t){let r=[{provide:io,useValue:ws},{provide:oo,useValue:p({skipNextTransition:!!t?.skipInitialTransition},t)}];return xt(9,r)}var Ii=new L("ROUTER_FORROOT_GUARD"),Fs=[Ye,{provide:ft,useClass:ot},re,mt,{provide:ye,useFactory:lo,deps:[re]},gr,[]],rd=(()=>{class t{constructor(e){}static forRoot(e,n){return{ngModule:t,providers:[Fs,[],{provide:ht,multi:!0,useValue:e},{provide:Ii,useFactory:Zs,deps:[[re,new on,new Er]]},{provide:Ct,useValue:n||{}},n?.useHash?Vs():Bs(),Hs(),n?.preloadingStrategy?Us(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?qs(n):[],n?.bindToComponentInputs?$s().\u0275providers:[],n?.enableViewTransitions?js().\u0275providers:[],Ws()]}}static forChild(e){return{ngModule:t,providers:[{provide:ht,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||t)(w(Ii,8))}}static{this.\u0275mod=an({type:t})}static{this.\u0275inj=nn({})}}return t})();function Hs(){return{provide:co,useFactory:()=>{let t=f(ti),r=f(W),e=f(Ct),n=f(mr),i=f(ft);return e.scrollOffset&&t.setOffset(e.scrollOffset),new zs(i,n,t,r,e)}}}function Vs(){return{provide:_n,useClass:Yr}}function Bs(){return{provide:_n,useClass:Gr}}function Zs(t){return"guarded"}function qs(t){return[t.initialNavigation==="disabled"?Ls().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Ns().\u0275providers:[]]}var Ei=new L("");function Ws(){return[{provide:Ei,useFactory:uo},{provide:vn,multi:!0,useExisting:Ei}]}function Ys(t,r){if(t&1&&P(0,"div",24),t&2){let e=b(2);G("background-image","url("+e.currentBackgroundImage+")")}}function Ks(t,r){t&1&&(u(0,"span",25),y(1,"\u25C0 PREV"),h())}function Qs(t,r){if(t&1){let e=Y();u(0,"button",32),A("click",function(){let i=I(e).$implicit,o=b(4);return E(o.selectChoice(i))}),y(1),h()}if(t&2){let e=r.$implicit;d(),be(" ",e.text," ")}}function Xs(t,r){if(t&1&&(u(0,"div",30),R(1,Qs,2,1,"button",31),h()),t&2){let e=b(3);d(),x("ngForOf",e.currentSlide.choices)}}function Js(t,r){if(t&1&&(u(0,"div",26)(1,"div",27),P(2,"div",28),R(3,Xs,2,1,"div",29),h()()),t&2){let e=b(2);d(2),x("innerHTML",e.formatTextWithLore(e.getSlideText(e.currentSlide)),Oe),d(),x("ngIf",e.currentSlide&&e.currentSlide.choices&&e.currentSlide.choices.length>0)}}function ec(t,r){if(t&1&&(u(0,"div",35),P(1,"p",36),h()),t&2){let e=b(3);d(),x("innerHTML",e.formatTextWithLore(e.getSlideText(e.currentSlide)),Oe)}}function tc(t,r){if(t&1&&(u(0,"div",26),P(1,"img",33),R(2,ec,2,1,"div",34),h()),t&2){let e=b(2);d(),x("src",(e.currentSlide==null?null:e.currentSlide.imageUrl)||"",Ve)("alt",e.getSlideText(e.currentSlide)),d(),x("ngIf",e.getSlideText(e.currentSlide))}}function nc(t,r){if(t&1&&P(0,"img",40),t&2){let e=b(3);x("src",(e.currentSlide==null?null:e.currentSlide.imageUrl)||"",Ve)}}function rc(t,r){if(t&1&&(u(0,"div",26)(1,"div",37),R(2,nc,1,1,"img",38),P(3,"div",39),h()()),t&2){let e=b(2);d(2),x("ngIf",e.currentSlide==null?null:e.currentSlide.imageUrl),d(),x("innerHTML",e.formatTextWithLore(e.getSlideText(e.currentSlide)),Oe)}}function ic(t,r){if(t&1){let e=Y();u(0,"div",26)(1,"div",41)(2,"div",42),y(3,"\u2699"),h(),P(4,"p",43),u(5,"button",44),A("click",function(){I(e);let i=b(2);return E(i.nextSlide())}),y(6,"Continue"),h()()()}if(t&2){let e=b(2);d(4),x("innerHTML",e.formatTextWithLore(e.getSlideText(e.currentSlide)),Oe)}}function oc(t,r){if(t&1&&(u(0,"div",47)(1,"span",48),y(2),h()()),t&2){let e=b(3);d(2),U(e.currentSlide.type.toUpperCase())}}function ac(t,r){if(t&1&&(u(0,"h2",49),y(1),h()),t&2){let e=b(3);d(),U(e.getSlideTitle())}}function sc(t,r){if(t&1){let e=Y();u(0,"button",32),A("click",function(){let i=I(e).$implicit,o=b(4);return E(o.selectChoice(i))}),y(1),h()}if(t&2){let e=r.$implicit;d(),be(" ",e.text," ")}}function cc(t,r){if(t&1&&(u(0,"div",30),R(1,sc,2,1,"button",31),h()),t&2){let e=b(3);d(),x("ngForOf",e.currentSlide.choices)}}function lc(t,r){if(t&1&&(u(0,"div",26)(1,"div",27),R(2,oc,3,1,"div",45)(3,ac,2,1,"h2",46),P(4,"div",28),R(5,cc,2,1,"div",29),h()()),t&2){let e=b(2);d(2),x("ngIf",e.currentSlide.type),d(),x("ngIf",e.getSlideTitle()),d(),x("innerHTML",e.formatTextWithLore(e.getSlideText(e.currentSlide)),Oe),d(),x("ngIf",e.currentSlide&&e.currentSlide.choices&&e.currentSlide.choices.length>0)}}function dc(t,r){t&1&&(u(0,"p"),y(1,"\xBFContinuar con el siguiente cap\xEDtulo?"),h())}function uc(t,r){t&1&&(u(0,"p"),y(1,"Has llegado al final del contenido disponible."),h())}function pc(t,r){if(t&1){let e=Y();u(0,"button",56),A("click",function(){I(e);let i=b(3);return E(i.goToNextChapter())}),y(1," Siguiente Cap\xEDtulo \u27A1\uFE0F "),h()}}function hc(t,r){if(t&1){let e=Y();u(0,"div",50)(1,"div",51)(2,"h3"),y(3,"\u{1F4D6} Cap\xEDtulo Completado"),h(),R(4,dc,2,0,"p",52)(5,uc,2,0,"p",52),h(),u(6,"div",53),R(7,pc,2,0,"button",54),u(8,"button",55),A("click",function(){I(e);let i=b(2);return E(i.returnToChapterIndex())}),y(9," \u{1F4DA} \xCDndice de Cap\xEDtulos "),h()()()}if(t&2){let e=b(2);d(4),x("ngIf",e.hasNextChapter()),d(),x("ngIf",!e.hasNextChapter()),d(2),x("ngIf",e.hasNextChapter())}}function gc(t,r){t&1&&(u(0,"span",25),y(1,"NEXT \u25B6"),h())}function fc(t,r){if(t&1){let e=Y();u(0,"div",2),R(1,Ys,1,2,"div",3),P(2,"div",4),u(3,"header",5)(4,"button",6),A("click",function(){I(e);let i=b();return E(i.onExitReader())}),u(5,"span",7),y(6,"\u2B05"),h()(),u(7,"div",8)(8,"h1",9),y(9),h()(),u(10,"div",10)(11,"span",11),y(12),h()(),u(13,"div",12),P(14,"div",13),h()(),u(15,"main",14)(16,"div",15),A("click",function(){I(e);let i=b();return E(i.previousSlide())})("touchstart",function(i){I(e);let o=b();return E(o.onTouchStart(i,"left"))})("touchend",function(i){I(e);let o=b();return E(o.onTouchEnd(i,"left"))}),R(17,Ks,2,0,"span",16),h(),u(18,"div",17),A("click",function(i){I(e);let o=b();return E(o.checkForLoreKeywords(i))}),R(19,Js,4,2,"div",18)(20,tc,3,3,"div",18)(21,rc,4,2,"div",18)(22,ic,7,1,"div",18)(23,lc,6,4,"div",18)(24,hc,10,3,"div",19),h(),u(25,"div",20),A("click",function(){I(e);let i=b();return E(i.nextSlide())})("touchstart",function(i){I(e);let o=b();return E(o.onTouchStart(i,"right"))})("touchend",function(i){I(e);let o=b();return E(o.onTouchEnd(i,"right"))}),R(26,gc,2,0,"span",16),h()(),u(27,"app-lore-popup",21),A("close",function(){I(e);let i=b();return E(i.closeLoreModal())}),h(),P(28,"app-geiger-detector",22)(29,"app-scrap-collector",23),h()}if(t&2){let e=b();F("reading",e.isReading)("zone-crisol",e.currentZone()==="crisol")("zone-vivero",e.currentZone()==="vivero")("zone-elite",e.currentZone()==="elite")("zone-laboratorio",e.currentZone()==="laboratorio")("zone-muerta",e.currentZone()==="muerta"),d(),x("ngIf",e.currentBackgroundImage),d(7),x("decryptSpeed",50),d(),U(e.currentChapter.title),d(3),jr("",e.currentSlideIndex+1," / ",e.totalSlides,""),d(2),G("width",e.chapterProgress,"%"),d(),x("ngClass",e.getSlideClasses()),d(),G("pointer-events",e.hasActiveChoices?"none":"all"),F("show-hint",e.showNavigationHints)("disabled",e.hasActiveChoices),d(),x("ngIf",e.showNavigationHints&&!e.hasActiveChoices),d(2),x("ngIf",(e.currentSlide==null?null:e.currentSlide.type)==="narrative"),d(),x("ngIf",(e.currentSlide==null?null:e.currentSlide.type)==="full_image"),d(),x("ngIf",(e.currentSlide==null?null:e.currentSlide.type)==="text_block"),d(),x("ngIf",(e.currentSlide==null?null:e.currentSlide.type)==="interactive_break"),d(),x("ngIf",e.currentSlide&&e.currentSlide.type!=="narrative"&&e.currentSlide.type!=="full_image"&&e.currentSlide.type!=="text_block"&&e.currentSlide.type!=="interactive_break"),d(),x("ngIf",e.isLastSlide()&&!e.hasActiveChoices),d(),G("pointer-events",e.hasActiveChoices||e.isLastSlide()?"none":"all"),F("show-hint",e.showNavigationHints)("disabled",e.hasActiveChoices||e.isLastSlide())("hidden",e.isLastSlide()),d(),x("ngIf",e.showNavigationHints&&!e.hasActiveChoices&&!e.isLastSlide()),d(),x("loreEntry",e.selectedLoreEntry)("isVisible",e.showLoreModal),d(),x("progress",e.chapterProgress)("isActive",e.geigerActive())("showParticles",!0),d(),x("chapterId",e.currentChapter.id)("showProgress",e.showScrapProgress)}}function mc(t,r){t&1&&(u(0,"div",57)(1,"p"),y(2,"\u2699 Cargando cap\xEDtulo..."),h()())}var bd=(()=>{class t{get hasActiveChoices(){return!!(this.currentSlide?.choices&&this.currentSlide.choices.length>0)}get totalSlides(){return this.currentChapter?.slides?.length||0}getSlideText(e){if(!e)return"";let n="";return typeof e.content=="string"?n=e.content:n=e.content.text||"",this.formatTextForReading(n)}formatTextForReading(e){return e?e.split(/\n\n+/).map(o=>(o=o.trim(),o.length>600?this.splitLongParagraph(o):o)).join(`

`):""}splitLongParagraph(e){let n=e.split(/\.\s+(?=[A-Z])/),i=[],o="";return n.forEach((a,c)=>{let s=a.endsWith(".")?a:a+".";o.length>0&&(o+" "+s).length>400?(i.push(o.trim()),o=s):o+=(o?" ":"")+s}),o&&i.push(o.trim()),i.join(`

`)}getSlideTitle(){return this.currentSlide?.title||""}constructor(e,n,i){this.contentService=e,this.storageService=n,this.router=i,this.exitReader=new ie,this.currentChapter=null,this.currentSlide=null,this.currentSlideIndex=0,this.isReading=!1,this.showLoreModal=!1,this.selectedLoreEntry=null,this.currentBackgroundImage=null,this.currentAmbientSound=null,this.isTransitioning=!1,this.slideAnimationClass="",this.showNavigationHints=!0,this.readingProgress=0,this.chapterProgress=0,this.geigerActive=S(!0),this.showScrapProgress=S(!0),this.currentZone=S("neutral"),this.hapticService=f(Rt),this.elementRef=f(He),this.zoneService=f(si),this.subscriptions=[]}ngOnInit(){this.subscribeToCurrentChapter(),this.subscribeToSaveState()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.autoAdvanceTimer&&clearTimeout(this.autoAdvanceTimer),this.currentAmbientSound&&(this.currentAmbientSound.pause(),this.currentAmbientSound=null)}subscribeToCurrentChapter(){let e=this.contentService.currentChapter$.subscribe(n=>{!n&&this.currentChapter||(this.currentChapter=n,n&&(this.detectAndApplyZone(n),this.loadSlide(),this.isReading=!0))});this.subscriptions.push(e)}subscribeToSaveState(){let e=this.storageService.saveState$.subscribe(n=>{n&&this.currentChapter&&(this.currentSlideIndex=n.currentSlideIndex,this.loadSlide(),this.updateProgress(),this.updateChapterProgress())});this.subscriptions.push(e)}detectAndApplyZone(e){let n=this.zoneService.detectChapterZone(e);this.zoneService.setReaderZone(n),this.currentZone.set(n),console.log(`\u{1F4CD} [ReaderComponent] Chapter "${e.title}" \u2192 Zone: ${n}`)}loadSlide(){if(!this.currentChapter||!this.currentChapter.slides){console.warn("\u26A0\uFE0F Cannot load slide: chapter or slides not available");return}let e=this.currentChapter.slides;this.currentSlideIndex>=0&&this.currentSlideIndex<e.length&&(this.isTransitioning=!0,this.slideAnimationClass="slide-fade-out",setTimeout(()=>{this.currentSlide=e[this.currentSlideIndex],this.updateBackgroundImage(),this.updateAmbientSound(),this.updateChapterProgress(),this.updateProgress(),this.setupAutoAdvance(),this.slideAnimationClass="slide-fade-in",setTimeout(()=>{this.isTransitioning=!1,this.slideAnimationClass=""},300)},200))}updateBackgroundImage(){this.currentSlide?.backgroundImage&&(this.currentBackgroundImage=this.currentSlide.backgroundImage)}updateAmbientSound(){let n=this.storageService.getCurrentSaveState()?.settings.soundEnabled??!0;this.currentAmbientSound&&(this.currentAmbientSound.pause(),this.currentAmbientSound=null),this.currentSlide?.ambientSound&&n&&(this.currentAmbientSound=new Audio(this.currentSlide.ambientSound),this.currentAmbientSound.loop=!0,this.currentAmbientSound.volume=.3,this.currentAmbientSound.play().catch(()=>{}))}onTap(e){if(this.showLoreModal)return;this.showNavigationHints&&this.hideNavigationHints();let n=window.innerWidth,i=e.clientX,o=n*.25,a=n*.75;i<o?this.previousSlide():i>a?this.nextSlide():this.checkForLoreKeywords(e)}hideNavigationHints(){setTimeout(()=>{this.showNavigationHints=!1},500)}nextSlide(){if(!this.currentChapter||!this.currentChapter.slides){console.warn("\u26A0\uFE0F Cannot advance slide: chapter or slides not available");return}this.hapticService.trigger("notification"),this.triggerTouchFeedback("right");let e=this.currentChapter.slides;this.currentSlideIndex<e.length-1?(this.currentSlideIndex++,this.storageService.updateProgress(this.currentChapter.id,this.currentSlideIndex),this.loadSlide(),this.updateProgress()):this.completeChapter()}previousSlide(){this.currentSlideIndex>0&&(this.hapticService.trigger("notification"),this.triggerTouchFeedback("left"),this.currentSlideIndex--,this.currentChapter&&(this.storageService.updateProgress(this.currentChapter.id,this.currentSlideIndex),this.loadSlide(),this.updateProgress()))}isLastSlide(){return!this.currentChapter||!this.currentChapter.slides?!1:this.currentSlideIndex===this.currentChapter.slides.length-1}hasNextChapter(){return this.currentChapter?!!this.contentService.getNextChapter(this.currentChapter.id):!1}goToNextChapter(){if(!this.currentChapter)return;this.hapticService.trigger("success");let e=this.contentService.getNextChapter(this.currentChapter.id);e&&(this.storageService.completeChapter(this.currentChapter.id),this.contentService.navigateToChapter(e.id,0))}returnToChapterIndex(){this.hapticService.trigger("notification"),this.currentChapter&&this.storageService.updateProgress(this.currentChapter.id,this.currentSlideIndex),this.exitReader.emit()}selectChoice(e){this.hapticService.trigger("success"),this.triggerTouchFeedback("center"),this.currentChapter&&this.currentSlide&&this.savePlayerChoice(this.currentChapter.id,this.currentSlide.id,e),e.nextSlide?this.navigateToSlideById(e.nextSlide):this.nextSlide()}navigateToSlideById(e){if(!this.currentChapter)return;let n=this.currentChapter.slides.findIndex(i=>i.id===e);n!==-1&&(this.currentSlideIndex=n,this.storageService.updateProgress(this.currentChapter.id,this.currentSlideIndex),this.loadSlide())}savePlayerChoice(e,n,i){let o=this.storageService.getCurrentSaveState();if(!o)return;o.playerChoices||(o.playerChoices=[]);let a={chapterId:e,slideId:n,choiceText:i.text,nextSlide:i.nextSlide,timestamp:new Date().toISOString()},c=o.playerChoices.findIndex(s=>s.chapterId===e&&s.slideId===n);c!==-1?o.playerChoices[c]=a:o.playerChoices.push(a),this.storageService.saveSaveState(o)}completeChapter(){if(!this.currentChapter)return;this.storageService.completeChapter(this.currentChapter.id),this.contentService.checkLoreUnlocks(this.currentChapter.id),this.updateProgress();let e=this.contentService.getNextChapter(this.currentChapter.id);e?this.contentService.navigateToChapter(e.id,0):this.router.navigate(["/"])}checkForLoreKeywords(e){if(!this.currentSlide)return;let i=e.target.closest("[data-lore-id]");if(i){let c=i.getAttribute("data-lore-id");if(c){let s=this.contentService.getLoreById(c);if(s){this.showLoreEntry(s),e.stopPropagation();return}}}let o=this.getSlideText(this.currentSlide),a=this.contentService.findLoreKeywords(o);if(a.length>0){let c=this.contentService.getLoreByKeywords(a),s=this.storageService.getCurrentSaveState(),l=c.filter(g=>s?.unlockedLoreIds.includes(g.id));l.length>0&&this.showLoreEntry(l[0])}}showLoreEntry(e){this.selectedLoreEntry=e,this.showLoreModal=!0,this.hapticService.trigger("success"),this.storageService.markLoreViewed&&this.storageService.markLoreViewed(e.id),this.autoAdvanceTimer&&clearTimeout(this.autoAdvanceTimer)}closeLoreModal(){this.showLoreModal=!1,this.selectedLoreEntry=null,this.setupAutoAdvance()}setupAutoAdvance(){!this.storageService.getCurrentSaveState()?.settings.autoAdvance||!this.currentSlide?.duration||(this.autoAdvanceTimer&&clearTimeout(this.autoAdvanceTimer),this.autoAdvanceTimer=setTimeout(()=>{this.nextSlide()},this.currentSlide.duration))}updateProgress(){this.readingProgress=this.contentService.getReadingProgress(),console.log(`\u{1F4CA} Reading Progress Updated: ${this.readingProgress}%`)}updateChapterProgress(){if(!this.currentChapter||!this.currentChapter.slides){this.chapterProgress=0;return}let e=this.currentChapter.slides.length;this.chapterProgress=Math.round((this.currentSlideIndex+1)/e*100),console.log(`\u{1F4D6} Chapter Progress: ${this.currentSlideIndex+1}/${e} = ${this.chapterProgress}%`)}onExitReader(){this.isReading=!1,this.exitReader.emit()}getSlideClasses(){let e=["slide"];return this.currentSlide&&e.push(`slide--${this.currentSlide.type}`),this.slideAnimationClass&&e.push(this.slideAnimationClass),e}formatTextWithLore(e){if(!e)return"";let n=e,i=/\*\*([^*]+)\*\*/g,o=e.matchAll(i);for(let c of o){let s=c[1].trim(),l=c[0],g=this.contentService.getLoreByKeywords([s])[0],m=this.storageService.getCurrentSaveState();g&&m?.unlockedLoreIds.includes(g.id)?n=n.replace(l,`<strong class="lore-keyword"
                   data-lore-id="${g.id}"
                   title="Click para ver m\xE1s sobre: ${s}">
            ${s}
          </strong>`):n=n.replace(l,`<strong>${s}</strong>`)}return this.contentService.findLoreKeywords(e).forEach(c=>{let s=this.storageService.getCurrentSaveState(),l=this.contentService.getLoreByKeywords([c])[0];if(l&&s?.unlockedLoreIds.includes(l.id)&&!n.includes(`data-lore-id="${l.id}"`)){let g=new RegExp(`\\b${c}\\b`,"gi");n=n.replace(g,`<span class="lore-keyword"
                    data-lore-id="${l.id}"
                    title="Click para ver m\xE1s sobre: ${c}">
              ${c}
            </span>`)}}),n}handleKeyPress(e){if(!(!this.isReading||this.showLoreModal))switch(e.key){case"ArrowRight":case" ":this.nextSlide();break;case"ArrowLeft":this.previousSlide();break;case"Escape":this.onExitReader();break}}triggerTouchFeedback(e){let n=this.elementRef.nativeElement.querySelector(".nav-zones");n&&(n.classList.add("active-touch"),setTimeout(()=>{n.classList.remove("active-touch")},300));let i=this.elementRef.nativeElement.querySelector(`.nav-zone--${e}`);i&&(i.style.transform="scale(0.996)",i.style.transition="transform 0.1s ease-out",setTimeout(()=>{i.style.transform="",i.style.transition=""},100))}onTouchStart(e,n){e.preventDefault(),this.triggerTouchFeedback(n),"vibrate"in navigator&&navigator.vibrate(10)}onTouchEnd(e,n){switch(e.preventDefault(),n){case"left":this.previousSlide();break;case"right":this.nextSlide();break;case"center":if(e.touches&&e.touches.length>0){let i=e.touches[0],o=new MouseEvent("click",{clientX:i.clientX,clientY:i.clientY,bubbles:!0});this.checkForLoreKeywords(o)}break}}static{this.\u0275fac=function(n){return new(n||t)(J(oi),J(ii),J(re))}}static{this.\u0275cmp=X({type:t,selectors:[["app-reader"]],hostBindings:function(n,i){n&1&&A("click",function(a){return i.onTap(a)})("keydown",function(a){return i.handleKeyPress(a)},!1,Dr)},outputs:{exitReader:"exitReader"},standalone:!0,features:[ee],decls:2,vars:2,consts:[["class","rustbone-reader reader-container",3,"reading","zone-crisol","zone-vivero","zone-elite","zone-laboratorio","zone-muerta",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"rustbone-reader","reader-container"],["class","background-image",3,"background-image",4,"ngIf"],[1,"cracked-glass"],[1,"reader-header"],["title","Exit Reader",1,"exit-btn",3,"click"],[1,"icon-exit"],[1,"chapter-info"],["appDecryptText","",1,"chapter-title",3,"decryptSpeed"],[1,"reader-stats"],[1,"slide-counter"],[1,"chapter-progress-bar"],[1,"chapter-progress-fill"],[1,"reader-content",3,"ngClass"],[1,"nav-zone","nav-zone--left",3,"click","touchstart","touchend"],["class","nav-hint",4,"ngIf"],[1,"zone-center",3,"click"],["class","slide-container",4,"ngIf"],["class","end-of-chapter",4,"ngIf"],[1,"nav-zone","nav-zone--right",3,"click","touchstart","touchend"],[3,"close","loreEntry","isVisible"],[3,"progress","isActive","showParticles"],[3,"chapterId","showProgress"],[1,"background-image"],[1,"nav-hint"],[1,"slide-container"],[1,"narrative-content"],[1,"narrative-text",3,"innerHTML"],["class","choices-container",4,"ngIf"],[1,"choices-container"],["class","choice-btn",3,"click",4,"ngFor","ngForOf"],[1,"choice-btn",3,"click"],["loading","lazy",1,"slide-image",3,"src","alt"],["class","image-overlay",4,"ngIf"],[1,"image-overlay"],[1,"overlay-text",3,"innerHTML"],[1,"text-content"],["class","text-image","loading","lazy",3,"src",4,"ngIf"],[1,"text-body",3,"innerHTML"],["loading","lazy",1,"text-image",3,"src"],[1,"interactive-content"],[1,"break-icon"],[1,"break-text",3,"innerHTML"],[1,"continue-btn",3,"click"],["class","slide-type-badge",4,"ngIf"],["class","slide-title",4,"ngIf"],[1,"slide-type-badge"],[1,"badge-text"],[1,"slide-title"],[1,"end-of-chapter"],[1,"end-message"],[4,"ngIf"],[1,"end-actions"],["class","btn-next-chapter",3,"click",4,"ngIf"],[1,"btn-chapter-index",3,"click"],[1,"btn-next-chapter",3,"click"],[1,"loading-state"]],template:function(n,i){n&1&&R(0,fc,30,49,"div",0)(1,mc,3,0,"div",1),n&2&&(x("ngIf",i.currentChapter),d(),x("ngIf",!i.currentChapter))},dependencies:[oe,Qr,Xr,Ot,ci,li,hi,gi],styles:[`@charset "UTF-8";[_nghost-%COMP%]{display:block;height:100vh;background:var(--ui-bg-primary);color:var(--ui-text-primary);font-family:Courier New,Monaco,monospace;overflow:hidden;position:relative}.loading-state[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:var(--ui-bg-primary);z-index:9999}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:var(--ui-accent);text-shadow:0 0 10px rgba(255,69,0,.6);animation:_ngcontent-%COMP%_pulse 2s infinite}.background-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:.3;z-index:1;transition:background-image .5s ease-in-out}.background-image[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,rgba(var(--ui-background-rgb),.7),rgba(var(--ui-background-rgb),.85),rgba(var(--ui-background-rgb),.9))}.cracked-glass[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 30%,rgba(255,255,255,.03) 1px,transparent 1px),radial-gradient(circle at 80% 70%,rgba(255,255,255,.02) 1px,transparent 1px),linear-gradient(45deg,transparent 45%,rgba(255,255,255,.01) 47%,rgba(255,255,255,.01) 53%,transparent 55%),linear-gradient(-45deg,transparent 60%,rgba(255,255,255,.015) 62%,transparent 64%);background-size:300px 300px,400px 400px,150px 150px,200px 200px;pointer-events:none;z-index:5;opacity:.4}.rustbone-reader[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100vh;background:radial-gradient(ellipse at center,var(--void-primary) 0%,var(--ui-background) 70%),linear-gradient(135deg,var(--ui-background) 0%,var(--dark-metal) 100%);position:relative}.rustbone-reader[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(90deg,transparent 0px,rgba(var(--terminal-green),.03) 1px,transparent 2px,transparent 40px);pointer-events:none;z-index:1}.rustbone-reader.reading[_ngcontent-%COMP%]{cursor:default}.rustbone-reader.reading[_ngcontent-%COMP%]   .reader-header[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:linear-gradient(135deg,rgba(var(--ui-surface),.95),rgba(var(--dark-metal),.85)),repeating-linear-gradient(90deg,transparent 0px,rgba(var(--ui-border),.3) 1px,transparent 2px,transparent 20px);transition:all .3s ease}.reader-header[_ngcontent-%COMP%]{grid-row:1;display:flex;align-items:center;padding:8px 16px;gap:12px;background:linear-gradient(135deg,var(--ui-surface) 0%,var(--dark-metal) 100%),repeating-linear-gradient(90deg,transparent 0px,var(--ui-border) 1px,transparent 2px,transparent 20px);border-bottom:2px solid var(--ui-border);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:50;position:relative;transition:all .5s ease;flex-wrap:wrap;min-height:50px}.reader-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(var(--terminal-green),.05) 20%,rgba(var(--rust-orange),.03) 80%,transparent 100%);pointer-events:none}.reader-header[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]{background:var(--ui-surface);border:2px solid var(--ui-border);color:var(--ui-text);padding:4px 10px;border-radius:0;cursor:pointer;transition:all .3s ease;font-family:inherit;font-size:12px;position:relative;z-index:1}.reader-header[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]   .icon-exit[_ngcontent-%COMP%]{font-size:12px;margin-right:4px}.reader-header[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]:hover{background:var(--terminal-green-dim);border-color:var(--terminal-green);color:var(--dark-metal);box-shadow:0 0 10px var(--terminal-green-glow),inset 0 0 5px rgba(var(--terminal-green),.2);transform:translate(-2px)}.reader-header[_ngcontent-%COMP%]   .chapter-info[_ngcontent-%COMP%]{flex:1;margin:0}.reader-header[_ngcontent-%COMP%]   .chapter-info[_ngcontent-%COMP%]   .chapter-title[_ngcontent-%COMP%]{margin:0;font-size:13px;color:var(--terminal-green);text-transform:uppercase;letter-spacing:1.5px;font-weight:700;text-shadow:0 0 8px var(--terminal-green-glow);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.reader-header[_ngcontent-%COMP%]   .reader-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:var(--ui-surface);border:2px solid var(--ui-border);padding:6px 12px;position:relative}.reader-header[_ngcontent-%COMP%]   .reader-stats[_ngcontent-%COMP%]   .slide-counter[_ngcontent-%COMP%]{font-size:12px;color:var(--terminal-green);font-family:Courier New,monospace;letter-spacing:1px;text-shadow:0 0 5px var(--terminal-green-glow)}.reader-header[_ngcontent-%COMP%]   .reader-stats[_ngcontent-%COMP%]   .slide-counter[_ngcontent-%COMP%]:before{content:"SLIDE ";color:var(--ui-text-dim)}.reader-header[_ngcontent-%COMP%]   .chapter-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:3px;background:var(--ui-surface);border-top:1px solid var(--ui-border);overflow:hidden;z-index:1}.reader-header[_ngcontent-%COMP%]   .chapter-progress-bar[_ngcontent-%COMP%]   .chapter-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--terminal-green),var(--ice-blue));transition:width .8s ease;box-shadow:0 0 8px var(--terminal-green-glow);position:relative}.reader-header[_ngcontent-%COMP%]   .chapter-progress-bar[_ngcontent-%COMP%]   .chapter-progress-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;right:0;top:0;width:20px;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3));animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%,to{opacity:0}50%{opacity:1}}.reader-content[_ngcontent-%COMP%]{grid-row:2;display:grid;grid-template-columns:auto 1fr auto;position:relative;overflow:hidden;background:radial-gradient(circle at 30% 20%,rgba(var(--terminal-green),.02) 0%,transparent 50%),radial-gradient(circle at 70% 80%,rgba(var(--rust-orange),.015) 0%,transparent 50%),var(--ui-background)}.reader-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="0.5" fill="%23ffffff" opacity="0.02"/><circle cx="25" cy="25" r="0.3" fill="%23ffffff" opacity="0.015"/><circle cx="75" cy="75" r="0.4" fill="%23ffffff" opacity="0.018"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');opacity:.3;pointer-events:none;z-index:1}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]{grid-column:1;position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center;min-width:60px;max-width:80px;width:70px;background:radial-gradient(circle at center,#0003,#0006),linear-gradient(135deg,rgba(var(--ice-blue),.05) 0%,transparent 50%);transition:all .3s ease}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:after{content:"\\2039";font-size:48px;color:var(--ice-blue);opacity:.5;text-shadow:0 0 10px rgba(var(--ice-blue),.5);transition:all .3s ease;pointer-events:none}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:hover{background:radial-gradient(circle at center,#00000026,#00000059),linear-gradient(135deg,rgba(var(--terminal-green),.08) 0%,transparent 40%);box-shadow:inset 0 0 30px rgba(var(--terminal-green),.2)}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:hover:after{opacity:.9;color:var(--terminal-green);text-shadow:0 0 15px var(--terminal-green-glow);transform:translate(-3px)}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:active{background:#000c;box-shadow:inset 0 0 50px #000000e6}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:active:after{opacity:1;transform:translate(-5px) scale(1.1)}.reader-content[_ngcontent-%COMP%]   .nav-zone--left.disabled[_ngcontent-%COMP%]{opacity:.3;pointer-events:none!important;cursor:default}.reader-content[_ngcontent-%COMP%]   .nav-zone--left.disabled[_ngcontent-%COMP%]:after{opacity:.2}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]   .nav-hint[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]{min-width:70px}.reader-content[_ngcontent-%COMP%]   .nav-zone--left[_ngcontent-%COMP%]:after{font-size:56px}}.reader-content[_ngcontent-%COMP%]   .zone-center[_ngcontent-%COMP%]{grid-column:2;display:flex;align-items:center;justify-content:center;position:relative;z-index:2;padding:20px}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]{grid-column:3;position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center;min-width:60px;max-width:80px;width:70px;background:radial-gradient(circle at center,#0003,#0006),linear-gradient(225deg,rgba(var(--rust-orange),.05) 0%,transparent 50%);transition:all .3s ease}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:after{content:"\\203a";font-size:48px;color:var(--rust-orange);opacity:.5;text-shadow:0 0 10px rgba(var(--rust-orange),.5);transition:all .3s ease;pointer-events:none}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:hover{background:radial-gradient(circle at center,#00000026,#00000059),linear-gradient(225deg,rgba(var(--terminal-green),.08) 0%,transparent 40%);box-shadow:inset 0 0 30px rgba(var(--terminal-green),.2)}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:hover:after{opacity:.9;color:var(--terminal-green);text-shadow:0 0 15px var(--terminal-green-glow);transform:translate(3px)}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:active{background:#000c;box-shadow:inset 0 0 50px #000000e6}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:active:after{opacity:1;transform:translate(5px) scale(1.1)}.reader-content[_ngcontent-%COMP%]   .nav-zone--right.disabled[_ngcontent-%COMP%]{opacity:.3;pointer-events:none!important;cursor:default}.reader-content[_ngcontent-%COMP%]   .nav-zone--right.disabled[_ngcontent-%COMP%]:after{opacity:.2}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]   .nav-hint[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]{min-width:70px}.reader-content[_ngcontent-%COMP%]   .nav-zone--right[_ngcontent-%COMP%]:after{font-size:56px}}.reader-content[_ngcontent-%COMP%]   .nav-zone--right.hidden[_ngcontent-%COMP%]{opacity:0;pointer-events:none!important}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.5}50%{opacity:1}}.slide-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative;z-index:2;transition:opacity .3s ease-in-out,transform .3s ease-in-out}.slide-fade-out[_ngcontent-%COMP%]{opacity:0;transform:scale(.95) translateY(10px);pointer-events:none}.slide-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideEnter .3s ease-out forwards}@keyframes _ngcontent-%COMP%_slideEnter{0%{opacity:0;transform:scale(.95) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.narrative-content[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;position:relative;z-index:10;overflow:hidden}.slide-type-badge[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:20}.slide-type-badge[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:linear-gradient(135deg,var(--terminal-green) 0%,rgba(0,255,136,.6) 100%);color:var(--dark-metal);font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;border-radius:3px;border:1px solid var(--terminal-green-glow);box-shadow:0 0 8px var(--terminal-green-glow),inset 0 0 5px #0000004d;font-family:Courier New,monospace;animation:_ngcontent-%COMP%_badgePulse 3s ease-in-out infinite}@media (min-width: 768px){.slide-type-badge[_ngcontent-%COMP%]{top:15px;right:20px}.slide-type-badge[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%]{padding:5px 14px;font-size:10px;letter-spacing:1.3px}}@media (min-width: 1024px){.slide-type-badge[_ngcontent-%COMP%]{top:20px;right:30px}.slide-type-badge[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%]{padding:6px 16px;font-size:11px;letter-spacing:1.5px}}@keyframes _ngcontent-%COMP%_badgePulse{0%,to{opacity:.8;box-shadow:0 0 10px var(--terminal-green-glow),inset 0 0 5px #0000004d}50%{opacity:1;box-shadow:0 0 20px var(--terminal-green-glow),0 0 30px #00ff884d,inset 0 0 5px #0000004d}}.slide-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--terminal-green);text-shadow:0 0 12px var(--terminal-green-glow);font-family:Georgia,Times New Roman,serif;text-align:center;margin:0 0 1.5rem;padding:0 1rem;letter-spacing:.3px;line-height:1.3;max-width:100%}.slide-title[_ngcontent-%COMP%]:after{content:"";display:block;width:50%;height:2px;background:linear-gradient(90deg,transparent 0%,var(--terminal-green) 50%,transparent 100%);margin:.8rem auto 0;box-shadow:0 0 6px var(--terminal-green-glow)}@media (min-width: 768px){.slide-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:2rem;padding:0 2rem}.slide-title[_ngcontent-%COMP%]:after{width:60%;margin-top:1rem}}@media (min-width: 1024px){.slide-title[_ngcontent-%COMP%]{font-size:28px}}.narrative-text[_ngcontent-%COMP%]{font-size:16px;line-height:1.8;font-family:Georgia,Times New Roman,serif;text-align:justify;color:var(--ui-text);letter-spacing:.2px;word-spacing:.05em;max-width:100%;width:100%;margin:0 auto;padding:1rem 1.5rem;box-sizing:border-box;max-height:100%;height:100%;overflow-y:auto;overflow-x:hidden;white-space:pre-wrap;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}.narrative-text[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.narrative-text[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a;border-radius:3px}.narrative-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--terminal-green);border-radius:3px;opacity:.6}.narrative-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--terminal-green-glow);opacity:1}.narrative-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--terminal-green);text-shadow:0 0 5px var(--terminal-green-glow);font-weight:700}.narrative-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5em;text-indent:0}@media (min-width: 768px){.narrative-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-of-type:first-letter{font-size:2.2em;font-weight:700;line-height:1;float:left;margin-right:.1em;color:var(--terminal-green);text-shadow:0 0 10px var(--terminal-green-glow)}}@media (min-width: 768px){.narrative-text[_ngcontent-%COMP%]{font-size:17px;line-height:1.85;padding:1.5rem 2.5rem;max-width:850px}}@media (min-width: 1024px){.narrative-text[_ngcontent-%COMP%]{font-size:18px;line-height:1.9;padding:2rem 3rem;max-width:900px}}.slide--full_image[_ngcontent-%COMP%]   .slide-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:contrast(1.2) brightness(.8) sepia(10%);border:4px solid var(--ui-border)}.slide--full_image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:12%;right:12%;width:76%;background:linear-gradient(transparent,var(--ui-background) 20%,var(--ui-background) 100%),repeating-linear-gradient(90deg,transparent 0px,var(--ui-border) 1px,transparent 2px,transparent 30px);padding:40px 32px 24px;border-top:2px solid var(--ui-border)}.slide--full_image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .overlay-text[_ngcontent-%COMP%]{font-size:18px;line-height:1.6;margin:0;text-align:center;font-family:Courier New,monospace;color:var(--ui-text);text-shadow:0 0 10px rgba(var(--terminal-green),.3)}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]{width:76%;max-width:900px;margin:0 12%;padding:40px;background:linear-gradient(135deg,var(--ui-surface) 0%,var(--dark-metal) 100%),repeating-linear-gradient(0deg,transparent 0px,var(--ui-border) 1px,transparent 2px,transparent 40px);border:2px solid var(--ui-border)}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,transparent 45%,rgba(var(--terminal-green),.02) 47%,rgba(var(--terminal-green),.02) 53%,transparent 55%),linear-gradient(-45deg,transparent 60%,rgba(var(--rust-orange),.01) 62%,transparent 64%);background-size:100px 100px,80px 80px;opacity:.5;pointer-events:none}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]   .text-image[_ngcontent-%COMP%]{width:100%;max-width:400px;height:auto;margin:0 auto 24px;border:3px solid var(--terminal-green);filter:contrast(1.1) brightness(.9) sepia(15%);box-shadow:0 0 20px var(--terminal-green-glow),inset 0 0 20px rgba(var(--terminal-green),.1)}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]   .text-body[_ngcontent-%COMP%]{font-size:20px;line-height:1.8;font-family:Courier New,Monaco,monospace;text-align:left;color:var(--ui-text);position:relative;z-index:1;letter-spacing:.5px}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]   .text-body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--terminal-green);text-shadow:0 0 5px var(--terminal-green-glow);font-weight:700}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]   .text-body[_ngcontent-%COMP%]:after{content:"\\2588";color:var(--terminal-green);animation:_ngcontent-%COMP%_blink 1s infinite;margin-left:2px}@keyframes _ngcontent-%COMP%_blink{0%,50%{opacity:1}51%,to{opacity:0}}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]{text-align:center;max-width:700px;padding:40px;background:linear-gradient(135deg,var(--void-primary) 0%,var(--ui-surface) 50%,var(--dark-metal) 100%),repeating-linear-gradient(45deg,transparent 0px,rgba(var(--rust-orange),.05) 1px,transparent 2px,transparent 30px);border:3px solid var(--rust-orange);position:relative}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 50% 50%,rgba(var(--rust-orange),.1) 0%,transparent 70%);pointer-events:none}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .break-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--rust-orange);margin-bottom:20px;animation:_ngcontent-%COMP%_pulse 2s infinite ease-in-out;text-shadow:0 0 20px var(--rust-orange-glow);position:relative;z-index:1}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .break-icon[_ngcontent-%COMP%]:before{content:"\\26a0"}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .break-text[_ngcontent-%COMP%]{font-size:18px;margin-bottom:24px;color:var(--ui-text);font-family:Courier New,monospace;line-height:1.6;letter-spacing:1px;position:relative;z-index:1}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .break-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--rust-orange);text-shadow:0 0 5px var(--rust-orange-glow)}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--rust-orange) 0%,var(--void-accent) 100%);border:2px solid var(--rust-orange);color:var(--dark-metal);padding:12px 24px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:2px;font-family:Courier New,monospace;position:relative;z-index:1}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 0 20px var(--rust-orange-glow),inset 0 0 10px #ffffff1a}.slide--interactive_break[_ngcontent-%COMP%]   .interactive-content[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}.choices-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:20px;padding:16px;background:linear-gradient(135deg,rgba(var(--ui-surface-rgb),.9),rgba(var(--dark-metal-rgb),.8)),repeating-linear-gradient(90deg,transparent 0px,rgba(var(--ui-border-rgb),.3) 1px,transparent 2px,transparent 40px);border:2px solid var(--rust-orange);border-radius:8px;position:relative;z-index:100;animation:_ngcontent-%COMP%_choice-appear .5s ease-out}.choices-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,transparent 0%,rgba(var(--rust-orange-rgb),.1) 50%,transparent 100%);animation:_ngcontent-%COMP%_scan-vertical 3s infinite linear;pointer-events:none;z-index:-1}.choices-container[_ngcontent-%COMP%]:after{content:"\\26a1  DECISI\\d3N REQUERIDA";position:absolute;top:-10px;left:50%;transform:translate(-50%);background:var(--ui-surface);color:var(--rust-orange);font-size:10px;font-weight:700;letter-spacing:1.5px;padding:3px 12px;border:2px solid var(--rust-orange);border-radius:4px;text-shadow:0 0 8px var(--rust-orange-glow);animation:_ngcontent-%COMP%_glow-pulse 2s infinite}.choice-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ui-surface) 0%,var(--dark-metal) 100%),repeating-linear-gradient(45deg,transparent 0px,rgba(var(--terminal-green-rgb),.05) 1px,transparent 2px,transparent 20px);border:2px solid var(--terminal-green);color:var(--ui-text);font-size:14px;font-family:Courier New,monospace;font-weight:600;text-align:left;cursor:pointer!important;position:relative;overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 12px #0000004d,inset 0 0 20px rgba(var(--terminal-green-rgb),.1);z-index:600;pointer-events:all;padding:12px 20px 12px 36px;animation:_ngcontent-%COMP%_choice-ready 2s ease-in-out infinite}.choice-btn[_ngcontent-%COMP%]:before{content:"\\25b6";position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--terminal-green);font-size:12px;transition:all .3s ease;opacity:.6}.choice-btn[_ngcontent-%COMP%]:hover{border-color:var(--rust-orange);color:var(--rust-orange);background:linear-gradient(135deg,var(--dark-metal) 0%,var(--ui-surface) 100%),repeating-linear-gradient(45deg,transparent 0px,rgba(var(--rust-orange-rgb),.1) 1px,transparent 2px,transparent 20px);transform:translate(6px) scale(1.01);box-shadow:0 6px 20px rgba(var(--rust-orange-rgb),.4),inset 0 0 30px rgba(var(--rust-orange-rgb),.2)}.choice-btn[_ngcontent-%COMP%]:hover:before{left:20px;color:var(--rust-orange);opacity:1;animation:_ngcontent-%COMP%_arrow-bounce .6s infinite}.choice-btn[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;top:50%;left:0;width:100%;height:2px;background:linear-gradient(90deg,transparent 0%,var(--rust-orange) 50%,transparent 100%);animation:_ngcontent-%COMP%_scan-horizontal 1s infinite;box-shadow:0 0 10px var(--rust-orange-glow)}.choice-btn[_ngcontent-%COMP%]:active{transform:translate(4px) scale(.98);box-shadow:0 2px 8px rgba(var(--rust-orange-rgb),.6),inset 0 0 40px rgba(var(--rust-orange-rgb),.3)}@keyframes _ngcontent-%COMP%_choice-appear{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_choice-ready{0%,to{box-shadow:0 4px 12px #0000004d,inset 0 0 20px rgba(var(--terminal-green-rgb),.1)}50%{box-shadow:0 4px 12px #0000004d,inset 0 0 30px rgba(var(--terminal-green-rgb),.2)}}@keyframes _ngcontent-%COMP%_arrow-bounce{0%,to{transform:translateY(-50%) translate(0)}50%{transform:translateY(-50%) translate(4px)}}@keyframes _ngcontent-%COMP%_scan-horizontal{0%{transform:translate(-100%)}to{transform:translate(100%)}}@keyframes _ngcontent-%COMP%_scan-vertical{0%{transform:translateY(-100%)}to{transform:translateY(100%)}}@keyframes _ngcontent-%COMP%_glow-pulse{0%,to{box-shadow:0 0 8px var(--rust-orange-glow)}50%{box-shadow:0 0 16px var(--rust-orange-glow)}}.nav-zones[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;pointer-events:none;z-index:5}.nav-zones.disabled[_ngcontent-%COMP%]{opacity:.1;pointer-events:none!important}.nav-zones.disabled[_ngcontent-%COMP%]   .nav-zone[_ngcontent-%COMP%]{pointer-events:none!important;cursor:default!important}.nav-zones[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to right,transparent 12%,rgba(var(--terminal-green),.1) 12.5%,rgba(var(--terminal-green),.1) 13%,transparent 13.5%),linear-gradient(to left,transparent 12%,rgba(var(--rust-orange),.1) 12.5%,rgba(var(--rust-orange),.1) 13%,transparent 13.5%),repeating-linear-gradient(90deg,transparent 0px,rgba(var(--ice-blue),.02) 2px,transparent 4px,transparent 60px);opacity:.3;pointer-events:none;z-index:1}.nav-zone[_ngcontent-%COMP%]{height:100%;pointer-events:all;position:relative;transition:all .2s cubic-bezier(.4,0,.2,1);z-index:2}.nav-zone[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid transparent;background:linear-gradient(135deg,rgba(var(--terminal-green),.05) 0%,transparent 50%),radial-gradient(circle at center,transparent 70%,rgba(var(--terminal-green),.02) 100%);transition:all .3s ease;pointer-events:none;z-index:1}.nav-zone[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(var(--terminal-green),.3) 0%,rgba(var(--terminal-green),.1) 30%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);opacity:0;transition:all .4s cubic-bezier(.25,.46,.45,.94);pointer-events:none;z-index:3}.nav-zone[_ngcontent-%COMP%]:hover:before{background:linear-gradient(135deg,rgba(var(--terminal-green),.08) 0%,transparent 40%),radial-gradient(circle at center,transparent 60%,rgba(var(--terminal-green),.05) 100%);border-color:rgba(var(--terminal-green),.3);box-shadow:inset 0 0 20px rgba(var(--terminal-green),.1),0 0 15px rgba(var(--terminal-green),.2)}.nav-zone[_ngcontent-%COMP%]:active{transform:scale(.998)}.nav-zone[_ngcontent-%COMP%]:active:before{background:#0009;border-color:rgba(var(--terminal-green),.7);box-shadow:inset 0 0 40px #000c,inset 0 0 20px rgba(var(--terminal-green),.3),0 0 25px rgba(var(--terminal-green),.5)}.nav-zone[_ngcontent-%COMP%]:active:after{width:200px;height:200px;opacity:1}.nav-zone--left[_ngcontent-%COMP%]{width:12%;cursor:pointer;background:radial-gradient(circle at center,#00000040,#00000059 60%,#00000073),linear-gradient(to right,rgba(var(--ice-blue),.1),rgba(var(--ice-blue),.05)),repeating-linear-gradient(90deg,transparent 0px,rgba(var(--ice-blue),.1) 2px,transparent 4px,transparent 20px)}.nav-zone--left[_ngcontent-%COMP%]:before{border-right:2px solid rgba(var(--ice-blue),.4);background:linear-gradient(to right,rgba(var(--ice-blue),.08) 0%,transparent 80%),radial-gradient(ellipse at left center,rgba(var(--ice-blue),.1) 0%,transparent 70%);box-shadow:inset 2px 0 20px rgba(var(--ice-blue),.1),2px 0 15px rgba(var(--ice-blue),.15)}.nav-zone--left[_ngcontent-%COMP%]:after{content:"\\2039";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:60px;color:var(--ice-blue);opacity:.8;transition:all .3s ease;pointer-events:none;font-weight:700;text-shadow:0 0 10px rgba(var(--ice-blue),.5);z-index:4}.nav-zone--left[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#000c,rgba(var(--ice-blue),.25),#0009)}.nav-zone--left[_ngcontent-%COMP%]:hover:before{border-right-color:rgba(var(--ice-blue),.7);box-shadow:inset 2px 0 25px rgba(var(--ice-blue),.2),2px 0 20px rgba(var(--ice-blue),.3)}.nav-zone--left[_ngcontent-%COMP%]:hover:after{opacity:1;color:var(--ice-blue);text-shadow:0 0 15px rgba(var(--ice-blue),.8)}.nav-zone--left[_ngcontent-%COMP%]:active{background:#000000e6}.nav-zone--left[_ngcontent-%COMP%]:active:before{border-right-color:var(--ice-blue);background:rgba(var(--ice-blue),.2);box-shadow:inset 5px 0 40px #000000e6,inset 0 0 30px rgba(var(--ice-blue),.3),5px 0 30px rgba(var(--ice-blue),.6)}.nav-zone--left[_ngcontent-%COMP%]:active:after{opacity:1;transform:scale(1);color:var(--ice-blue);text-shadow:0 0 20px var(--ice-blue)}.nav-zone--center[_ngcontent-%COMP%]{width:76%;cursor:ew-resize;background:transparent}.nav-zone--center[_ngcontent-%COMP%]:before{border:none;background:transparent;transition:all .2s ease}.nav-zone--center[_ngcontent-%COMP%]:hover:before{background:radial-gradient(circle at center,rgba(var(--terminal-green),.02) 0%,transparent 70%)}.nav-zone--center[_ngcontent-%COMP%]:active:before{background:radial-gradient(circle at center,rgba(var(--terminal-green),.1) 0%,rgba(0,0,0,.3) 20%,transparent 60%)}.nav-zone--center[_ngcontent-%COMP%]:after{display:none}.nav-zone--right[_ngcontent-%COMP%]{width:12%;cursor:pointer;background:linear-gradient(to left,#00000040,#00000059 60%,#00000073),linear-gradient(to left,rgba(var(--rust-orange),.1),rgba(var(--rust-orange),.05)),repeating-linear-gradient(90deg,transparent 0px,rgba(var(--rust-orange),.1) 2px,transparent 4px,transparent 20px)}.nav-zone--right[_ngcontent-%COMP%]:before{border-left:2px solid rgba(var(--rust-orange),.4);background:linear-gradient(to left,rgba(var(--rust-orange),.08) 0%,transparent 80%),radial-gradient(ellipse at right center,rgba(var(--rust-orange),.1) 0%,transparent 70%);box-shadow:inset -2px 0 20px rgba(var(--rust-orange),.1),-2px 0 15px rgba(var(--rust-orange),.15)}.nav-zone--right[_ngcontent-%COMP%]:after{content:"\\203a";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:60px;color:var(--rust-orange);opacity:.8;transition:all .3s ease;pointer-events:none;font-weight:700;text-shadow:0 0 10px rgba(var(--rust-orange),.5);z-index:4}.nav-zone--right[_ngcontent-%COMP%]:hover{background:linear-gradient(to left,#000c,rgba(var(--rust-orange),.25),#0009)}.nav-zone--right[_ngcontent-%COMP%]:hover:before{border-left-color:rgba(var(--rust-orange),.7);box-shadow:inset -2px 0 25px rgba(var(--rust-orange),.2),-2px 0 20px rgba(var(--rust-orange),.3)}.nav-zone--right[_ngcontent-%COMP%]:hover:after{opacity:1;color:var(--rust-orange);text-shadow:0 0 15px rgba(var(--rust-orange),.8)}.nav-zone--right[_ngcontent-%COMP%]:active{background:#000000e6}.nav-zone--right[_ngcontent-%COMP%]:active:before{border-left-color:var(--rust-orange);background:rgba(var(--rust-orange),.2);box-shadow:inset -5px 0 40px #000000e6,inset 0 0 30px rgba(var(--rust-orange),.3),-5px 0 30px rgba(var(--rust-orange),.6)}.nav-zone--right[_ngcontent-%COMP%]:active:after{opacity:1;transform:scale(1);color:var(--rust-orange);text-shadow:0 0 20px var(--rust-orange)}.nav-hint[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:8px;pointer-events:none;z-index:100;opacity:0;animation:_ngcontent-%COMP%_hintFadeIn 1s ease-in-out .5s forwards,hintPulse 2s ease-in-out 1.5s infinite}.nav-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{font-size:32px;color:var(--rust-orange);text-shadow:0 0 10px var(--rust-orange-glow),0 0 20px var(--rust-orange-glow);filter:drop-shadow(0 0 15px var(--rust-orange-glow))}.nav-hint[_ngcontent-%COMP%]   .hint-label[_ngcontent-%COMP%]{font-size:11px;font-weight:700;letter-spacing:2px;color:var(--ui-text);background:rgba(var(--ui-surface-rgb),.9);padding:4px 12px;border:1px solid var(--rust-orange);border-radius:3px;text-shadow:0 0 5px rgba(0,0,0,.8);box-shadow:0 0 10px var(--rust-orange-glow),inset 0 0 10px rgba(var(--rust-orange-rgb),.2)}.nav-hint--center[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{color:var(--terminal-green);text-shadow:0 0 10px var(--terminal-green-glow),0 0 20px var(--terminal-green-glow);filter:drop-shadow(0 0 15px var(--terminal-green-glow))}.nav-hint--center[_ngcontent-%COMP%]   .hint-label[_ngcontent-%COMP%]{border-color:var(--terminal-green);box-shadow:0 0 10px var(--terminal-green-glow),inset 0 0 10px rgba(var(--terminal-green-rgb),.2)}.nav-zone.show-hint[_ngcontent-%COMP%]:hover   .nav-hint[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hintPulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_hintFadeIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_hintPulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:1}50%{transform:translate(-50%,-50%) scale(1.05);opacity:.85}}.nav-zones.active-touch[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(0deg,transparent 0px,rgba(var(--terminal-green),.01) 1px,transparent 2px,transparent 100px);opacity:1;animation:_ngcontent-%COMP%_touch-feedback .3s ease-out;pointer-events:none}@keyframes _ngcontent-%COMP%_touch-feedback{0%{opacity:0;transform:scale(1.02)}50%{opacity:1;transform:scale(.998)}to{opacity:0;transform:scale(1)}}.lore-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s ease}.lore-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#2a2a2a);border:2px solid #FF4500;border-radius:12px;width:90%;max-width:700px;max-height:80vh;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s ease;box-shadow:0 20px 40px #00000080}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]{padding:1.5rem;background:#ff45001a;border-bottom:1px solid #FF4500;display:flex;align-items:center}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]   .lore-title[_ngcontent-%COMP%]{flex:1;margin:0;color:#ff4500;font-size:1.5rem;text-transform:uppercase;letter-spacing:1px}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]   .lore-category[_ngcontent-%COMP%]{background:#ff4500;color:#121212;padding:.3rem .8rem;border-radius:20px;font-size:.8rem;text-transform:uppercase;font-weight:700;margin-right:1rem}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]   .lore-close[_ngcontent-%COMP%]{background:none;border:2px solid #FF4500;color:#ff4500;width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]   .lore-close[_ngcontent-%COMP%]:hover{background:#ff4500;color:#121212;transform:rotate(90deg)}.lore-modal[_ngcontent-%COMP%]   .lore-content[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;max-height:60vh}.lore-modal[_ngcontent-%COMP%]   .lore-content[_ngcontent-%COMP%]   .lore-image[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;border-radius:8px;margin-bottom:1rem;border:1px solid #333}.lore-modal[_ngcontent-%COMP%]   .lore-content[_ngcontent-%COMP%]   .lore-text[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;margin-bottom:1.5rem;color:#e0e0e0}.lore-modal[_ngcontent-%COMP%]   .lore-content[_ngcontent-%COMP%]   .lore-blueprint[_ngcontent-%COMP%]{width:100%;height:auto;border:2px solid #FF4500;border-radius:8px;background:#0a0a0a;padding:.5rem;filter:contrast(1.2) brightness(1.1)}.lore-keyword[_ngcontent-%COMP%]{color:var(--rust-orange);cursor:pointer;text-decoration:underline;text-decoration-style:dotted;text-decoration-color:var(--rust-orange);text-decoration-thickness:2px;transition:all .2s ease;position:relative;font-weight:600}.lore-keyword[_ngcontent-%COMP%]:hover{color:var(--magma-red);text-decoration-color:var(--magma-red);text-shadow:0 0 8px rgba(var(--rust-orange-rgb),.6);transform:scale(1.05)}.lore-keyword[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;inset:-2px -4px;background:linear-gradient(90deg,transparent 0%,rgba(var(--rust-orange-rgb),.15) 50%,transparent 100%);border-radius:3px;z-index:-1;animation:_ngcontent-%COMP%_scanline 1.5s infinite}.lore-keyword[data-lore-id][_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_subtle-pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_subtle-pulse{0%,to{opacity:1}50%{opacity:.85}}@keyframes _ngcontent-%COMP%_scanline{0%{transform:translate(-100%)}to{transform:translate(100%)}}.no-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.no-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]{text-align:center;max-width:400px}.no-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ff4500;margin-bottom:1rem;font-size:2rem}.no-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;color:#888}.no-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff4500,#ff6a00);border:none;color:#121212;padding:1rem 2rem;border-radius:8px;font-size:1rem;cursor:pointer;text-transform:uppercase;letter-spacing:1px}.no-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@media (max-width: 768px){.reader-header[_ngcontent-%COMP%]{padding:8px 16px}.reader-header[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.reader-header[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]   .icon-exit[_ngcontent-%COMP%]{font-size:12px;margin-right:4px}.reader-header[_ngcontent-%COMP%]   .chapter-info[_ngcontent-%COMP%]{margin:0}.reader-header[_ngcontent-%COMP%]   .chapter-info[_ngcontent-%COMP%]   .chapter-title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:1px}.reader-header[_ngcontent-%COMP%]   .reader-stats[_ngcontent-%COMP%]{padding:4px 8px}.reader-header[_ngcontent-%COMP%]   .reader-stats[_ngcontent-%COMP%]   .slide-counter[_ngcontent-%COMP%]{font-size:11px}.reader-header[_ngcontent-%COMP%]   .chapter-progress-bar[_ngcontent-%COMP%]{height:2px}.reader-footer[_ngcontent-%COMP%]{padding:6px 16px}.reader-footer[_ngcontent-%COMP%]   .reading-progress[_ngcontent-%COMP%]{gap:8px}.reader-footer[_ngcontent-%COMP%]   .reading-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:10px;min-width:80px}.reader-footer[_ngcontent-%COMP%]   .reading-progress[_ngcontent-%COMP%]   .global-progress-bar[_ngcontent-%COMP%]{height:3px}.reader-footer[_ngcontent-%COMP%]   .reading-progress[_ngcontent-%COMP%]   .progress-percentage[_ngcontent-%COMP%]{font-size:10px;min-width:35px}.slide-container[_ngcontent-%COMP%]{padding:16px}.narrative-content[_ngcontent-%COMP%]{padding:12px}.narrative-text[_ngcontent-%COMP%]{font-size:16px;line-height:1.6}.narrative-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1em}.choices-container[_ngcontent-%COMP%]{margin-top:16px;padding:12px;gap:10px}.choice-btn[_ngcontent-%COMP%]{font-size:13px;padding:10px 16px 10px 32px}.choice-btn[_ngcontent-%COMP%]:before{left:10px;font-size:11px}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]{padding:1rem}.slide--text_block[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]   .text-body[_ngcontent-%COMP%]{font-size:1rem}.lore-modal[_ngcontent-%COMP%]{width:95%}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]{padding:1rem}.lore-modal[_ngcontent-%COMP%]   .lore-header[_ngcontent-%COMP%]   .lore-title[_ngcontent-%COMP%]{font-size:1.2rem}}.end-of-chapter[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:3rem;padding:3rem 2rem;background:linear-gradient(135deg,#000c,#000000e6),radial-gradient(circle at center,rgba(var(--terminal-green),.05) 0%,transparent 70%);border-radius:12px;box-shadow:0 0 30px rgba(var(--terminal-green),.2),inset 0 0 40px #0009;border:2px solid rgba(var(--terminal-green),.3);animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--terminal-green);text-shadow:0 0 15px var(--terminal-green-glow);margin-bottom:1rem;font-weight:600;letter-spacing:1px}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#fffc;line-height:1.6;font-family:Georgia,Times New Roman,serif}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:400px}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 24px;font-size:16px;font-weight:600;border:2px solid rgba(var(--terminal-green),.5);border-radius:8px;background:linear-gradient(135deg,#000000b3,#000c),radial-gradient(circle at center,rgba(var(--terminal-green),.1) 0%,transparent 70%);color:var(--terminal-green);cursor:pointer;transition:all .3s ease;text-shadow:0 0 8px rgba(var(--terminal-green),.5);box-shadow:0 4px 15px #00000080,inset 0 0 20px rgba(var(--terminal-green),.05);position:relative;overflow:hidden}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(var(--terminal-green),.2),transparent);transition:left .5s ease}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0009,#000000b3),radial-gradient(circle at center,rgba(var(--terminal-green),.2) 0%,transparent 70%);border-color:var(--terminal-green);box-shadow:0 6px 25px rgba(var(--terminal-green),.4),inset 0 0 30px rgba(var(--terminal-green),.1);text-shadow:0 0 12px var(--terminal-green-glow);transform:translateY(-2px)}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98);box-shadow:0 2px 10px rgba(var(--terminal-green),.3),inset 0 0 40px #000c}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   .btn-next-chapter[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(var(--rust-orange),.2),#000c),radial-gradient(circle at center,rgba(var(--rust-orange),.1) 0%,transparent 70%);border-color:rgba(var(--rust-orange),.5);color:var(--rust-orange);text-shadow:0 0 8px rgba(var(--rust-orange),.5)}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   .btn-next-chapter[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(var(--rust-orange),.3),#000000b3),radial-gradient(circle at center,rgba(var(--rust-orange),.2) 0%,transparent 70%);border-color:var(--rust-orange);box-shadow:0 6px 25px rgba(var(--rust-orange),.4),inset 0 0 30px rgba(var(--rust-orange),.1);text-shadow:0 0 12px rgba(var(--rust-orange),.8)}@media (max-width: 768px){.end-of-chapter[_ngcontent-%COMP%]{margin-top:2rem;padding:2rem 1.5rem}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]{margin-bottom:1.5rem}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}.end-of-chapter[_ngcontent-%COMP%]   .end-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]{max-width:100%}.end-of-chapter[_ngcontent-%COMP%]   .end-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;font-size:14px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}`]})}}return t})();export{Ol as a,Rl as b,nd as c,rd as d,Rt as e,si as f,ui as g,pi as h,gi as i,bd as j};
